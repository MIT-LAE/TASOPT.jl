<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Drag ¬∑ TASOPT.jl</title><meta name="title" content="Drag ¬∑ TASOPT.jl"/><meta property="og:title" content="Drag ¬∑ TASOPT.jl"/><meta property="twitter:title" content="Drag ¬∑ TASOPT.jl"/><meta name="description" content="Documentation for TASOPT.jl."/><meta property="og:description" content="Documentation for TASOPT.jl."/><meta property="twitter:description" content="Documentation for TASOPT.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TASOPT.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/loadingrunning/">Loading and running</a></li><li><a class="tocitem" href="../../examples/payload_range/">Payload-range diagram</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/NM_optimization/">Nelder Mead</a></li><li><a class="tocitem" href="../../examples/gradient_based_optimization/">Gradient Based Optimization</a></li></ul></li><li><a class="tocitem" href="../../examples/sensitivity/">Sensitivities</a></li></ul></li><li><span class="tocitem">Aerodynamics</span><ul><li><a class="tocitem" href="../geometry/">Geometry</a></li><li><a class="tocitem" href="../lift/">Lift</a></li><li class="is-active"><a class="tocitem" href>Drag</a><ul class="internal"><li><a class="tocitem" href="#axi"><span>Axisymmetric fuselage drag</span></a></li><li><a class="tocitem" href="#trefftz"><span>Trefftz plane drag calculation</span></a></li><li><a class="tocitem" href="#Wing-and-tail-surfaces"><span>Wing and tail surfaces</span></a></li><li><a class="tocitem" href="#Total-drag-calculation"><span>Total drag calculation</span></a></li><li><a class="tocitem" href="#Other-utilities"><span>Other utilities</span></a></li></ul></li><li><a class="tocitem" href="../moment/">Pitching moment</a></li><li><a class="tocitem" href="../../atmos/atmos/">Atmospheric properties</a></li></ul></li><li><span class="tocitem">Structures</span><ul><li><a class="tocitem" href="../../structures/wing/">Wings and tails</a></li><li><a class="tocitem" href="../../structures/fuselage/">Fuselage</a></li><li><a class="tocitem" href="../../structures/cabin_sizing/">Cabin sizing</a></li></ul></li><li><span class="tocitem">Cryogenic tanks</span><ul><li><a class="tocitem" href="../../cryo_tank/cryotank/">Homogeneous model</a></li><li><a class="tocitem" href="../../cryo_tank/fueltanks/">Thermal and structural models</a></li></ul></li><li><span class="tocitem">Propulsion systems</span><ul><li><a class="tocitem" href="../../propulsion/propsys/">Propulsion system</a></li><li><a class="tocitem" href="../../propulsion/gascalc/">Gas Calculations</a></li><li><a class="tocitem" href="../../propulsion/hxfun/">Heat exchangers</a></li><li><a class="tocitem" href="../../propulsion/PEMfuelcell/">PEM fuel cells</a></li></ul></li><li><a class="tocitem" href="../../balance/balance/">Stability</a></li><li><span class="tocitem">Mission and sizing</span><ul><li><a class="tocitem" href="../../sizing/sizing/">Design and evaluation</a></li><li><a class="tocitem" href="../../sizing/weightmodels/">TASOPT Weight Model</a></li></ul></li><li><span class="tocitem">Data and I/O</span><ul><li><a class="tocitem" href="../../data_io/data_basics/">Data structure basics</a></li><li><a class="tocitem" href="../../data_io/data_io/">Loading and saving models</a></li></ul></li><li><span class="tocitem">Miscellaneous</span><ul><li><a class="tocitem" href="../../misc/structs/">Data structures</a></li><li><a class="tocitem" href="../../misc/dreladocs/">Original Drela docs</a></li><li><a class="tocitem" href="../../misc/misc/">Other utilities</a></li><li><a class="tocitem" href="../../misc/fordevs/">Notes for devs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Aerodynamics</a></li><li class="is-active"><a href>Drag</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Drag</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl/blob/main/docs/src/aero/drag.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Drag"><a class="docs-heading-anchor" href="#Drag">Drag</a><a id="Drag-1"></a><a class="docs-heading-anchor-permalink" href="#Drag" title="Permalink"></a></h1><p>The key drag contributions are assumed to come from the fuselage, wing and tail surfaces, and the lift-induced drag calculated at the Trefftz plane. Wave drag is not explicitly modelled.</p><h2 id="axi"><a class="docs-heading-anchor" href="#axi">Axisymmetric fuselage drag</a><a id="axi-1"></a><a class="docs-heading-anchor-permalink" href="#axi" title="Permalink"></a></h2><p>The fuselage profile drag is determined by a quasi-axisymmetric coupled viscous-inviscid calculation. See <a href="../../assets/drela_TASOPT_2p16/axibl.pdf">Simplified Viscous/Inviscid Analysis for Nearly-Axisymmetric Bodies</a> by M. Drela.</p><p>This method does not require any wetted area approximations or fineness-ratio correlations, but does require the geometry to be specified in the form of a cross-sectional area distribution <span>$A{\scriptstyle (x)}$</span> and a perimeter distribution <span>$b_0{\scriptstyle (x)}$</span>, shown in the Figure¬†below. For a round cross-section these are, of course, related. To allow treating more general fuselage cross-sections, they are assumed to be specified separately. The cross section sizes and shapes can vary along the body, provided the variation is reasonably smooth.</p><p><img src="../../assets/ADfuse.png" alt="ADfuse"/></p><details class="admonition is-details"><summary class="admonition-header">üìñ Theory - axisymmetric fuselage profile drag</summary><div class="admonition-body"><p>The viscous calculation produces displacement, momentum, and kinetic energy areas <span>$\Delta^*, \Theta, \Theta^* {\scriptstyle (x)}$</span>.</p><p>The cross-sectional area over the center cylindrical portion is <span>$A_{\rm fuse}$</span>, which has already been defined by</p><p class="math-container">\[\begin{aligned}
A_{\rm fuse} =  \left[ \pi + n_{\rm fweb}\left( 2\theta_{\rm fb}+ \sin 2 \theta_{\rm fb}\right) 
 \right] R_{\rm fuse}^2 \;+\; 2 \left[ R_{\rm fuse}+ n_{\rm fweb}w_{\rm fb}\right] \Delta R_{\rm fuse}.
\end{aligned}\]</p><p>This also defines the radius of the equivalent round cylinder.  <span>$\begin{aligned} R_{\rm cyl}&amp; = &amp; \sqrt{\frac{A_{\rm fuse}}{\pi}} \end{aligned}.$</span> </p><p>The equivalent radii over the tapering nose and radius are then defined via the following convenient functions.</p><p class="math-container">\[\begin{aligned}
R {\scriptstyle (x)}&amp; = &amp;
\left\{
\begin{array}{lcl}
\displaystyle
R_{\rm cyl}
\left[ \: 
1 - \left( \frac{x_{{\rm blend}_1} \!-\! x}{x_{{\rm blend}_1} \!-\! x_{\rm nose}} 
      \right)^{\!\! a} \;
      \right]^{\! 1/a}
&amp; , &amp; x_{\rm nose}&lt; x &lt; x_{{\rm blend}_1} 
\\[1.0em]
\displaystyle
R_{\rm cyl}
&amp; , &amp; x_{{\rm blend}_1} &lt; x &lt; x_{{\rm blend}_{\,2}}
\\[0.5em]
\displaystyle
R_{\rm cyl}
\left[ \:
1 - \left( \frac{x \!-\! x_{{\rm blend}_{\,2}}}{x_{\rm end} \!-\! x_{{\rm blend}_{\,    2}}} 
      \right)^{\!\! b} \;
      \right]
&amp; , &amp; x_{{\rm blend}_{\,2}} &lt; x &lt; x_{\rm tail}
\end{array}
\right.
\\
a &amp; \simeq 1.6 &amp;
\\
b &amp; \simeq 2.0 &amp;
\end{aligned}\]</p><p>The <span>$x_{{\rm blend}_1}$</span> and <span>$x_{{\rm blend}_{\,2}}$</span> locations are the nose and tailcone blend points, and do not necessarily have to be exactly the same as the <span>$x_{{\rm shell}_1}$</span> and <span>$x_{{\rm shell}_{\,2}}$</span> locations which define the loaded pressure shell. Likewise, <span>$x_{\rm end}$</span> is the aerodynamic endpoint of the tailcone, and is distinct from its structural endpoint <span>$x_{\rm conend}$</span>. The <span>$a$</span> and <span>$b$</span> constant values above give reasonable typical fuselage shapes.</p><p>If the fuselage is nearly round, the necessary area and perimeter distributions follow immediately. </p><p class="math-container">\[\begin{aligned}
A {\scriptstyle (x)}&amp; = &amp; \pi \, {R{\scriptstyle (x)}}^2
\\
b_0 {\scriptstyle (x)}&amp; = &amp; 2 \pi R {\scriptstyle (x)}
\end{aligned}\]</p><p>This would be suitably modified for non-circular cross-sections.</p><p>With this geometry definition, the viscous/inviscid calculation procedure provides the momentum and kinetic energy area distributions along the body and wake,</p><p class="math-container">\[\begin{aligned}
\left\{ \Theta {\scriptstyle (s)}\, , \: \Theta^* {\scriptstyle (s)}\right\} &amp; = &amp;
f_{\rm f_{excr}} \:
{\cal F}(M_{{\scriptscriptstyle \infty}}, Re_\ell\, ; \, A {\scriptstyle (x)}, b_0 {\scriptstyle (x)})
\end{aligned}\]</p><p>where <span>${\cal F}$</span> denotes the overall viscous/inviscid calculation procedure, and <span>$f_{\rm f_{excr}} \geq 1$</span> is an empirical factor to allow for fuselage excrescence drag sources.</p><p>Specific values of interest are the momentum area <span>$\Theta_{\rm wake}$</span> at the wake numerical endpoint <span>$s_{\rm wake}$</span>, the far-downstream momentum area <span>$\Theta_{\scriptscriptstyle \infty}$</span>, and the kinetic energy area <span>$\Theta_{\scriptscriptstyle T\!E}$</span> at the body endpoint or trailing edge. </p><p class="math-container">\[\begin{aligned}
\Theta_{\rm wake}&amp; = &amp; \Theta (s_{\rm wake}) 
\\
H_{\rm avg}  &amp; = &amp; 
{\textstyle \frac{1}{2}}\left[ H(s_{\rm wake}) + 1 + (\gamma\!-\!1) M_{{\scriptscriptstyle \infty}}^2 \right]
\\
\Theta_{\scriptscriptstyle \infty}&amp; = &amp; \Theta_{\rm wake}
\left( \frac{u_e (s_{\rm wake})}{V_{\!{\scriptscriptstyle \infty}}} \right)^{H_{\rm avg}} 
\\
\Theta^*_{\scriptscriptstyle T\!E}&amp; = &amp; \Theta^*(s_{\scriptscriptstyle T\!E}) 
\end{aligned}\]</p><p>The equation above is the Squire-Young formula, with <span>$H_{\rm avg}$</span> being the average shape parameter between the end of the wake and far downstream.</p><p>The fuselage surface + wake dissipated power in the absence of BLI is then evaluated as follows, consistent with the usual wake momentum defect relations. </p><p class="math-container">\[\begin{aligned}
C&#39;_{\!D_{\rm fuse}} &amp; \equiv &amp;
\frac{\Phi_{\rm surf}-P_{V_{\rm surf}} + \Phi_{\rm wake}-P_{V_{\rm wake}}}
           {{\textstyle \frac{1}{2}}\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}^3 S} 
\hspace{6ex}
\rm{(without BLI)}
\hspace{-9.0ex}
\\
C&#39;_{\!D_{\rm fuse}}
&amp; = &amp; \frac{D_{\rm fuse}}{{\textstyle \frac{1}{2}}\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}^2 S}
\;=\; \frac{2 \Theta_{\scriptscriptstyle \infty}}{S} 
\hspace{17ex}
\rm{(without BLI)}
\hspace{-9.0ex}
\end{aligned}\]</p><p>If BLI is present at or near the trailing edge, the upstream boundary layer and corresponding surface dissipation <span>$\Phi_{\rm surf}$</span> will be mostly unaffected. But the viscous fluid flowing into the wake is now reduced by the ingestion fraction <span>${f_{\rm {\scriptscriptstyle BLI}_{\scriptstyle \,f}}}$</span>, so that the wake dissipation <span>$\Phi_{\rm wake}$</span> will be reduced by the same fraction. This then gives the following overall fuselage dissipation coefficient for the BLI case. </p><p class="math-container">\[\begin{aligned}
C_{\!D_{\rm fuse}} &amp;\!=\! &amp;
\frac{\Phi_{\rm surf}\!-\!P_{V_{\rm surf}} \,+\, 
       (\Phi_{\rm wake}\!-\!P_{V_{\rm wake}})(1\!-\!{f_{\rm {\scriptscriptstyle BLI}_{\scriptstyle \,f}}})}
     {{\textstyle \frac{1}{2}}\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}^3 S} 
\hspace{3ex}
\mathrm{(with BLI)}
\hspace{-2ex}
\\
C_{\!D_{\rm fuse}} 
&amp; \!\simeq\! &amp;
C_{\!D_{\rm fuse}} \,-\, C_{\Phi_{\rm wake}} {f_{\rm {\scriptscriptstyle BLI}_{\scriptstyle \,f}}}
\hspace{23ex}
\mathrm{(with BLI)}
\hspace{-2ex}
\\[0.5em]
\rm{where} \hspace{3ex}
C_{\Phi_{\rm wake}} &amp; \!=\! &amp; 
\frac{2 \Theta_{\scriptscriptstyle \infty}}{S} \:-\: \frac{\Theta^*_{\scriptscriptstyle T\!E}}{S} 
\end{aligned}\]</p></div></details><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.axisol!-NTuple{16, Any}" href="#TASOPT.aerodynamics.axisol!-NTuple{16, Any}"><code>TASOPT.aerodynamics.axisol!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">axisol!(xnose, xend, xblend1, xblend2, Amax, 
      anose, btail, iclose,
      Mach, nc, nldim,
        xl, zl, sl, dyl, ql)</code></pre><p>Calculates compressible potential flow about a quasi-axisymmetric body,  using a simple piecewise-constant source line.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>xnose::Float64</code>: X (axial) location of nose point. </li><li><code>xend::Float64</code>: X location of tail point.</li><li><code>xblend1::Float64</code>: X location of nose-section blend point.</li><li><code>xblend2::Float64</code>: X location of tail-section blend point.</li><li><code>Amax::Float64</code>: Maximum cross-sectional area.</li><li><code>anose::Float64</code>: Nose-section shape exponent.</li><li><code>btail::Float64</code>: Tail-section shape exponent.</li><li><code>iclose::Integer</code>: If 0, tail tapers to a point, otherwise to an edge.</li><li><code>Mach::Float64</code>: Freestream Mach number for Prandtl-Glauert.</li><li><code>nc::Integer</code>: Number of control points to be used.</li><li><code>nldim::Integer</code>: Max dimension of passed arrays.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>nl::Integer</code>: Number of output surface and wake points.</li><li><code>ilte::Integer</code>: Index of TE point.</li><li><code>xl::Array{Float64}</code>: X (axial) locations of surface segment endpoints.</li><li><code>zl::Array{Float64}</code>: Z (vertical) locations of surface segment endpoints.</li><li><code>sl::Array{Float64}</code>: Arc lengths along surface and wake.</li><li><code>dyl::Array{Float64}</code>: Half-width of edge-type tail section.</li><li><code>ql::Array{Float64}</code>: Velocities V/V_inf along surface and wake.</li></ul></div></details><p>See <a href="#axi">theory above</a> or Section 3 of <a href="../../assets/drela_TASOPT_2p16/axibl.pdf">Simplified Viscous/Inviscid Analysis for Nearly-Axisymmetric Bodies</a>.  See also <a href="../../sizing/sizing/#TASOPT.aerodynamics.fusebl!"><code>fusebl!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/axisol.jl#L1-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.blsys-NTuple{65, Any}" href="#TASOPT.aerodynamics.blsys-NTuple{65, Any}"><code>TASOPT.aerodynamics.blsys</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">blsys(simi, lami, wake, direct, Mach, uinv, hksep,
      x, b, rn, th, ds, ue,
      h , h_th, h_ds,
      hk, hk_th, hk_ds, hk_ue,
      hc, hc_th, hc_ds, hc_ue,
      hs, hs_th, hs_ds, hs_ue,
      cf, cf_th, cf_ds, cf_ue,
      di, di_th, di_ds, di_ue,
      xm,bm,rnm,thm,dsm,uem, 
      hm , hm_thm, hm_dsm,
      hkm, hkm_thm, hkm_dsm, hkm_uem,
      hcm, hcm_thm, hcm_dsm, hcm_uem,
      hsm, hsm_thm, hsm_dsm, hsm_uem,
      cfm, cfm_thm, cfm_dsm, cfm_uem,
      dim, dim_thm, dim_dsm, dim_uem)</code></pre><p>Computes Jacobian matrices for BL solution at an axial station. Called repeatedly by <a href="#TASOPT.aerodynamics.blax-NTuple{10, Any}"><code>blax</code></a>.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>simi::Integer</code>: Self-similar BL profile flag.</li><li><code>lami::Integer</code>: Laminar flow flag.</li><li><code>wake::Integer</code>: In wake? Flag.</li><li><code>direct::Integer</code>: Direct solution flag.</li><li><code>Mach::Float64</code>: Mach number for compressibility.</li><li><code>uinv::Float64</code>: Inviscid velocity.</li><li><code>x::Float64</code>: Arc length.</li><li><code>b::Float64</code>: Lateral width of BL.</li><li><code>rn::Float64</code>: <span>$dr/dn$</span>, <span>$= 0$</span> for 2D.</li><li><code>th::Float64</code>: Momentum thickness.</li><li><code>ds::Float64</code>: Displacement thickness.</li><li><code>ue::Float64</code>: Edge velocity.</li><li><code>h::Float64</code>: Shape parameter.</li><li><code>hk::Float64</code>: Kinematic shape parameter.</li><li><code>hc::Float64</code>: density shape parameter (Whitfield).</li><li><code>hs::Float64</code>: kinetic energy shape parameter.</li><li><code>cf::Float64</code>: Skin friction factor.</li><li><code>di::Float64</code>: Dissipation factor.</li></ul><p><code>m</code> denotes the previous point (minus one) in the upstream.   <code>_z</code> denotes partial derivative with respect to <code>z</code> (<code>z</code> = <code>th</code>, <code>ds</code>, <code>ue</code>).</p><p><strong>Outputs:</strong></p><ul><li><code>aa::Array{Float64, 3, 3}</code>: Jacobian matrix (wrt current point vars).</li><li><code>bb::Array{Float64, 3, 3}</code>: Jacobian matrix (wrt previous point vars).</li><li><code>rr::Array{Float64, 3}</code>: Residual.</li></ul></div></details><p>See Section 4 of <a href="../../assets/drela_TASOPT_2p16/axibl.pdf">Simplified Viscous/Inviscid Analysis for Nearly-Axisymmetric Bodies</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/blsys.jl#L4-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.blax-NTuple{10, Any}" href="#TASOPT.aerodynamics.blax-NTuple{10, Any}"><code>TASOPT.aerodynamics.blax</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">blax(ndim, n,ite, xi, bi, rni, uinv, Reyn, Mach, fexcr)</code></pre><p>Axisymmetric boundary layer + wake calculation routine. Uses specified inviscid velocity, corrects for viscous displacement to allow calculation of separated flow.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ndim::Integer</code>: physical array dimension.</li><li><code>n::Integer</code>: number of boundary layer + wake points.</li><li><code>ite::Integer</code>: index of trailing edge point, start of wake.</li><li><code>xi::Array{Float64}</code>: arc length array (BL coordinate).</li><li><code>bi::Array{Float64}</code>: lateral width of BL at surface (i.e., body perimeter). <span>$b_i$</span> = 0 for wake, 1 for 2D.</li><li><code>rni::Array{Float64}</code>: <span>$dr/dn$</span> to account for near-axisymmetric bodies, 0 for 2D.</li><li><code>uinv::Array{Float64}</code>: inviscid velocity, <span>$u_{inv}$</span>.</li><li><code>Reyn::Float64</code>: Reynolds number,  <span>$\rho_{ref} u_{ref} l_{ref} / \mu_{ref}$</span>.</li><li><code>Mach::Float64</code>: Mach number,  <span>$M = u_{ref} / a_{ref}$</span>.</li><li><code>fexcr::Float64</code>: excrescence multiplier applied to wall <span>$c_f$</span>, 1 for smooth wall.</li></ul><p>Assumed units for all quantities:</p><ul><li><code>l_ref</code>: same unit as used for input <code>xi</code>,<code>bi</code>.</li><li><code>u_ref</code>: freestream velocity.</li><li><code>a_ref</code>: freestream speed of sound.</li><li><code>rho_ref</code>: freestream density.</li><li><code>mu_ref</code>: freestream viscosity.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>uei::Array{Float64}</code>:  edge velocity, (<span>$u_{e,i} = u_{inv,i} +$</span> {displacement correction}).</li><li><code>dsi::Array{Float64}</code>:  displacement thickness (<span>$\delta^*$</span>).</li><li><code>thi::Array{Float64}</code>:  momentum thickness     (<span>$\theta$</span>).</li><li><code>tsi::Array{Float64}</code>:  kinetic energy thickness (<span>$\theta^*$</span>).</li><li><code>dci::Array{Float64}</code>:  density flux thickness   (<span>$\delta^{**}$</span>).</li><li><code>cfi::Array{Float64}</code>:  skin friction coefficient, normalized with local <span>$\rho$</span>, <span>$u$</span> (<span>$c_{f,i}$</span>).</li><li><code>cdi::Array{Float64}</code>:  dissipation coefficient  , normalized with local <span>$\rho$</span>,<span>$u$</span> (<span>$c_{\mathcal{D},i}$</span>).</li><li><code>cti::Array{Float64}</code>:  max shear-stress coefficient, normalized with local <span>$\rho$</span>,<span>$u$</span> (<span>$c_{t,i}$</span>).</li><li><code>hki::Array{Float64}</code>:  kinematic shape parameter (<span>$H_{K,i}$</span>).</li><li><code>phi::Array{Float64}</code>:  integrated dissipation (<span>$\Phi$</span>).</li></ul><p>Other outputs of interest can be computed as follows.   These are in units of <code>l_ref</code>, <code>rho_ref</code>, <code>u_ref</code></p><ul><li><code>beffi</code>: Effective perimeter,  <span>$b_{eff,i} = b_i  +  2 \pi \delta^* dr/dn$</span>.</li><li><code>rhi</code>: Edge density, <span>$\rho_i = (1 + \frac{(\gamma-1)}{2}M^2 (1.0-u_{e,i}^2))^\frac{1}{(\gamma-1)}$</span>.</li><li><code>mdef</code>: Total mass defect, <span>$\rho_i u_{e,i} \delta^* b_{eff}$</span>.</li><li><code>Pdef</code>: Total momentum defect, <span>$\rho_i u_{e,i}^2 \theta b_{eff}$</span>.</li><li><code>Edef</code>: Total kinetic energy defect, <span>$\frac{1}{2} \rho_i u_{e,i}^3 \theta^* b_{eff}$</span>.</li><li><code>tauwb</code>: Wall shear force/span, <span>$\frac{\tau_w}{b} = \frac{1}{2} u_{e,i}^2 c_{f,i} b_{eff}$</span>.</li><li><code>Diss</code>: Dissipation integral, <span>$\rho_i u_{e,i}^3 c_{\mathcal{D},i} b_{eff,i}$</span>.</li></ul><p>Body profile drag <code>D_p</code> is the far-downstream momentum defect <span>$P_\infty$</span>,   best obtained by applying Squire-Young to the last wake point, <span>$i = n$</span> :</p><ul><li><span>$P_{end} = \rho_i u_{e,i}^2 \theta b_{eff}$</span></li><li><span>$H_{end} = \delta^*/\theta$</span></li><li><span>$H_{\infty} = 1 + (\gamma-1) M^2$</span></li><li><span>$H_{avg} = \frac{1}{2} (H_{end} + H_{inf})$</span></li><li><span>$P_{inf} = P_{end} u_{e,i}^{H_{avg}}  =  D_p$</span></li></ul></div></details><p>See Section 4 of <a href="../../assets/drela_TASOPT_2p16/axibl.pdf">Simplified Viscous/Inviscid Analysis for Nearly-Axisymmetric Bodies</a>. See also <a href="#TASOPT.aerodynamics.blsys-NTuple{65, Any}"><code>blsys</code></a> and <a href="#TASOPT.aerodynamics.blvar-NTuple{10, Any}"><code>blvar</code></a>. Deprecates <code>blax</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/blax.jl#L1-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.blvar-NTuple{10, Any}" href="#TASOPT.aerodynamics.blvar-NTuple{10, Any}"><code>TASOPT.aerodynamics.blvar</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">blvar(simi, lami, wake, Reyn, Mach, fexcr, x, Œ∏, Œ¥s, ue)</code></pre><p>Returns the boundary layer variables needed for solution.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>simi::Integer</code>: Self-similar BL profile flag.</li><li><code>lami::Integer</code>: Laminar flow flag.</li><li><code>wake::Integer</code>: In wake flag.</li><li><code>Reyn::Float64</code>: Reynolds number.</li><li><code>Mach::Float64</code>: Mach number for compressibility.</li><li><code>fexcr::Float64</code>: Excrescence factor.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>h::Float64</code> : Shape parameter.</li><li><code>hk::Float64</code>: Kinematic shape parameter.</li><li><code>hc::Float64</code>: Density shape parameter (Whitfield).</li><li><code>hs::Float64</code>: Kinetic energy shape parameter.</li><li><code>cf::Float64</code>: Skin friction factor.</li><li><code>cd::Float64</code>: Dissipation factor and their derivatives.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/blsys.jl#L303-L325">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.fusebl!-NTuple{4, Any}" href="#TASOPT.aerodynamics.fusebl!-NTuple{4, Any}"><code>TASOPT.aerodynamics.fusebl!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fusebl!(pari, parg, para, ip)</code></pre><p>Calculates surface velocities, boundary layer, wake  for a quasi-axisymmetric body in compressible flow.</p><p>A compressible source line represents the potential flow. An integral BL formulation with lateral divergence represents the surface BL and wake. An added-source distribution represents the viscous displacement influence on the potential flow. The body shape is defined by its area and perimeter distributions <code>A(x)</code>,  <code>b0(x)</code>, which are defined by the various geometric parameters in <code>parg</code>.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pari::AbstractVector{Int64}</code>: Vector of <code>aircraft</code> model integer/flag parameters.</li><li><code>parg::AbstractArray{Float64}</code>: Vector of <code>aircraft</code> model geometry parameters.</li><li><code>para::AbstractArray{Float64}</code>: Vector of <code>aircraft</code> model aerodynamic parameters.</li><li><code>parm::AbstractArray{Float64}</code>: Vector of <code>aircraft</code> model mission parameters.</li><li><code>ip::Integer</code>: Index of flight point in <code>par</code> arrays.</li></ul><p><strong>Outputs:</strong></p><ul><li>No explicit outputs. Computed drag values are saved to <code>para</code> of <code>aircraft</code> model.</li></ul></div></details><p>See <a href="../../assets/drela_TASOPT_2p16/axibl.pdf">Simplified Viscous/Inviscid Analysis for Nearly-Axisymmetric Bodies</a>. See also <a href="#TASOPT.aerodynamics.blax-NTuple{10, Any}"><code>blax</code></a> and <a href="#TASOPT.aerodynamics.axisol!-NTuple{16, Any}"><code>axisol!</code></a>.</p><div class="admonition is-compat"><header class="admonition-header">Future Changes</header><div class="admonition-body"><p>In an upcoming revision, an <code>aircraft</code> struct and auxiliary indices will be passed in lieu of pre-sliced <code>par</code> arrays.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/fusebl.jl#L3-L32">source</a></section></article><hr/><h2 id="trefftz"><a class="docs-heading-anchor" href="#trefftz">Trefftz plane drag calculation</a><a id="trefftz-1"></a><a class="docs-heading-anchor-permalink" href="#trefftz" title="Permalink"></a></h2><p>Trefftz plane analysis computes the induced drag from lifting surfaces. The lift distributions are propagated downstream, accounting for streamline contraction from fuselage thickness variation as shown in the Figure below. </p><p><img src="../../assets/trefftz.png" alt/> Two shaded streamtubes are shown. Wake center radius <span>$y&#39;_o$</span> is nonzero due to the fuselage viscous wake displacement area.</p><p>The vorticity in the wake is numerially integrated at collocation points to determine the overall induced drag.</p><p><img src="../../assets/tpvort.png" alt="T"/></p><p>Trefftz Plane vortices <span>$i,i\!+\!1 \ldots$</span> and collocation points <span>$i\!+\!1/2$</span> used for velocity, impulse, and kinetic energy calculations. Left/right symmetry is exploited.  </p><details class="admonition is-details"><summary class="admonition-header">üìñ Theory - induced drag $C_{d,i}$</summary><div class="admonition-body"><p>The induced drag is calculated using a discrete vortex Trefftz-Plane analysis. The circulation of the wing wake immediately behind the trailing edge is </p><p class="math-container">\[\begin{aligned}
\Gamma_{\!{\rm wing}} {\scriptstyle (\eta)}
&amp; = \frac{\tilde{p} {\scriptstyle (\eta)}}{\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}}
\; \simeq \; \frac{p {\scriptstyle (\eta)}}{\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}} \, \sqrt{1 \!-\! \eta^{k_t}}
\\
k_t &amp; \simeq 16
\end{aligned}\]</p><p>where the approximation realistically represents the tip lift rolloff for typical taper ratios, and is consistent with the assumed <span>$f_{L_{\scriptstyle t}}\simeq -0.05$</span> value for the tip lift loss factor. This circulation is convected into the wake along streamlines which will typically constrict behind the fuselage by continuity. The Figure above shows two possible aft fuselage taper shapes, giving two different wake constrictions.</p><p>An annular streamtube at the wing contracts to another annular streamtube in the wake with the same cross-sectional area. The <span>$y$</span> and <span>$y&#39;$</span> locations on the wing and wake which are connected by a streamline are therefore related by the correspondence function. </p><p class="math-container">\[\begin{aligned}
y&#39;{\scriptstyle (y)}&amp; = &amp; \sqrt{ y^2 - y_o^2 + {y&#39;_o}^2}
\end{aligned}\]</p><p>The Trefftz Plane circulation <span>$\Gamma {\scriptstyle (y&#39;)}$</span> is then given by the coordinate shift. The mapping function <span>$y&#39;{\scriptstyle (y)}$</span> is not defined for <span>$y \! &lt; \! y_o$</span>, so the circulation there is simply set from the <span>$y_o$</span> value. </p><p class="math-container">\[\begin{aligned}
\Gamma_{\rm wake} {\scriptstyle (y&#39;)}&amp; = &amp; 
\left\{
\begin{array}{lcl}
\Gamma_{\!{\rm wing}} \left( y {\scriptstyle (y&#39;)}\right)
&amp; , &amp; y \!&gt;\! y_o \\
\Gamma_{\!{\rm wing}} \left( y_o \right)
\end{array}
\right.
\end{aligned}\]</p><p>The Trefftz Plane analysis uses point vortices. The circulation ([Gamwake]) is evaluated at the midpoints of <span>$n$</span> intervals along the wake trace, spaced more or less evenly in the Glauert angle to give a cosine distribution in physical space. The wake&#39;s vertical <span>$z$</span> positions are simply taken directly from the wing. </p><p class="math-container">\[\begin{aligned}
\theta_{i+1/2} &amp; = &amp; \frac{\pi}{2} \, \frac{i-1/2}{n}
\hspace{2ex} , \hspace{2ex} i = 1 \ldots n
\\
y_{i+1/2} &amp; = &amp; \frac{b}{2} \, \cos \theta_{i+1/2}
\\
y&#39;_{i+1/2} &amp; = &amp; \sqrt{y_{i+1/2}^2 - y_o^2 + {y&#39;_o}^2}
\\
z&#39;_{i+1/2} &amp; = &amp; z_{i+1/2}
\\
\Gamma_{\!i+1/2} &amp; = &amp; \Gamma_{\!{\rm wing}} (y_{i+1/2})
\end{aligned}\]</p><p>The locations of <span>$n+1$</span> trailing vortices are computed similarly. </p><p class="math-container">\[\begin{aligned}
\theta_i &amp; = &amp; \frac{\pi}{2} \, \frac{i-1}{n}
\hspace{2ex} , \hspace{2ex} i = 1 \ldots n\!+\!1
\\
y_i &amp; = &amp; \frac{b}{2} \, \cos \theta_i
\\
y&#39;_i &amp; = &amp; \sqrt{y_i^2 - y_o^2 + {y&#39;_o}^2}
\\
z&#39;_i &amp; = &amp; z_i
\end{aligned}\]</p><p>The circulations of these trailing vortices are the differences of the adjacent bound circulations, with the circulation beyond the tips effectively zero. </p><p class="math-container">\[\begin{aligned}
\bar{\Gamma}_{\!i} &amp; = &amp; 
\left\{
\begin{array}{lcl}
\hspace{6.5ex}
-\Gamma_{\!i-1/2} &amp; , &amp; i = 1 \hspace{3.5em} \mathrm{(left tip)}
\\
\Gamma_{\!i+1/2}-\Gamma_{\!i-1/2} &amp; , &amp; i = 2 \ldots n
\\
\Gamma_{\!i+1/2} &amp; , &amp; i = n\!+\!1 \hspace{2em} \mathrm{(right tip)}
\end{array}
\right.
\end{aligned}\]</p><p>The above definitions are also applied to the horizontal tail, with its discrete points simply appended to the list and <span>$n$</span> increased accordingly.</p><p>The Trefftz plane calculation proceeds by first calculating the <span>$y$</span>-<span>$z$</span> wake velocity components at the <span>$y&#39;_{i+1/2},z&#39;_{i+1/2}$</span> interval midpoints, induced by all the trailing vortices and their left-side images. </p><p class="math-container">\[\begin{aligned}
v_{i+1/2} &amp; = &amp; \sum_{j=1}^{n+1} \frac{\bar{\Gamma}_{\!j}}{2\pi} 
\left[
\frac{-(z&#39;_{i+1/2}\!-\!z&#39;_j)}
      {(y&#39;_{i+1/2}\!-\!y&#39;_j)^2
     + (z&#39;_{i+1/2}\!-\!z&#39;_j)^2}
\,-\,
\frac{-(z&#39;_{i+1/2}\!-\!z&#39;_j)}
      {(y&#39;_{i+1/2}\!+\!y&#39;_j)^2
     + (z&#39;_{i+1/2}\!-\!z&#39;_j)^2}
\right]
\hspace{2em}
\\
w_{i+1/2} &amp; = &amp; \sum_{j=1}^{n+1} \frac{\bar{\Gamma}_{\!j}}{2\pi}
\left[
\frac{ y&#39;_{i+1/2}\!-\!y&#39;_j}
     {(y&#39;_{i+1/2}\!-\!y&#39;_j)^2
    + (z&#39;_{i+1/2}\!-\!z&#39;_j)^2}
\,-\,
\frac{ y&#39;_{i+1/2}\!+\!y&#39;_j}
     {(y&#39;_{i+1/2}\!+\!y&#39;_j)^2
    + (z&#39;_{i+1/2}\!-\!z&#39;_j)^2}
\right]
\end{aligned}\]</p><p>The overall lift and induced drag are then computed using the Trefftz Plane vertical impulse and kinetic energy. The sums are doubled to account for the left side image. </p><p class="math-container">\[\begin{aligned}
C_{\!L_{\scriptscriptstyle T\!P}} &amp; = &amp; \frac{2}{{\textstyle \frac{1}{2}}\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}^2 S} \: \sum_{i=1}^{n} 
\: \rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}\, \Gamma_{\!i+1/2} \: (y&#39;_{i+1}-y&#39;_i)
\\
C_{\!D_{\scriptscriptstyle T\!P}} &amp; = &amp; \frac{2}{{\textstyle \frac{1}{2}}\rho_{\scriptscriptstyle \infty}V_{\!{\scriptscriptstyle \infty}}^2 S} \: \sum_{i=1}^{n} 
-\frac{\rho_{\scriptscriptstyle \infty}}{2} \, \Gamma_{\!i+1/2} \left[
      w_{i+1/2} \,(y&#39;_{i+1}\!-\!y&#39;_i)
 \:-\:v_{i+1/2} \,(z&#39;_{i+1}\!-\!z&#39;_i) \right]
\end{aligned}\]</p><p>To minimize any modeling and numerical errors incurred in the wake contraction model and the point-vortex summations, the final induced drag value is scaled by the square of the surface-integral and Trefftz-Plane drag values. </p><p class="math-container">\[\begin{aligned}
C_{\!D_i} &amp; = &amp; C_{\!D_{\scriptscriptstyle T\!P}} \left(\frac{C_{\!L}}{C_{\!L_{\scriptscriptstyle T\!P}}} \right)^{\!2}
\end{aligned}\]</p><p>This is equivalent to using the Trefftz Plane analysis to calculate the span efficiency rather than the actual induced drag coefficient.</p></div></details><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.cditrp-Tuple{Any, Any, Any}" href="#TASOPT.aerodynamics.cditrp-Tuple{Any, Any, Any}"><code>TASOPT.aerodynamics.cditrp</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">  cditrp(para, wing, htail)</code></pre><p>Computes the induced drag via the Trefftz plane. Calls <a href="#TASOPT.aerodynamics.trefftz1-NTuple{32, Any}"><code>trefftz1</code></a>.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>para::AbstractArray{Float64}</code>: Array of <code>aircraft</code> model aerodynamic parameters.</li><li><code>wing::TASOPT.Wing</code>: Wing Structure.</li><li><code>htail::TASOPT.Tail</code>: Htail Structure.</li></ul><p><strong>Outputs:</strong></p><ul><li>No explicit outputs. Computed induced drag value and span efficiency are saved to <code>para</code> of <code>aircraft</code> model.</li></ul></div></details><div class="admonition is-compat"><header class="admonition-header">Future Changes</header><div class="admonition-body"><p>In an upcoming revision, an <code>aircraft</code> struct and auxiliary indices will be passed in lieu of pre-sliced <code>par</code> arrays.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/cdsum.jl#L236-L253">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.trefftz1-NTuple{32, Any}" href="#TASOPT.aerodynamics.trefftz1-NTuple{32, Any}"><code>TASOPT.aerodynamics.trefftz1</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trefftz1(nsurf, npout, npinn, npimg, 
      Sref, bref, b, bs, bo, bop, 
      zcent, po, gammat, gammas, 
      fLo,ktip, Lspec, CLsurfsp)</code></pre><p>Trefftz plane routine for the induced drag computation of <code>nsurf</code> number of surfaces.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>nsurf::Integer</code>: Number of surfaces (typically wing and horizontal tail).</li><li><code>npout::Integer</code>: Number of spanwise intervals (outer panel).</li><li><code>npinn::Integer</code>:  &quot;     &quot;       (inner panel).</li><li><code>npimg::Integer</code>:  &quot;     &quot;       (image inside fuselage).</li><li><code>b::Float64</code>: Span.</li><li><code>bs::Float64</code>: Wing-break span.</li><li><code>bo::Float64</code>: Wing-root span.</li><li><code>bop::Float64</code>: Span of wing-root streamline in Trefftz plane</li><li><code>zcent::Vector{Float64}</code>: Vertical position at centerline for each surface.</li><li><code>gammat::Vector{Float64}</code>, gammas::Vector{Float64}`: Wing lift distribution &quot;taper&quot; ratios for outer and inner wing sections, respectively.</li><li><code>fLo</code>: wing root load adjustment factors (currently not implemented).</li><li><code>ktip::Float64</code>: wing tip load adjustment factors.</li><li><code>Lspec::Integer</code>: Flag for specified lift calculation (scales vorticities to achieve <code>CLsurfsp</code> before computing induced drag).</li><li><code>CLsurfsp::Vector{Float64}</code>: Prescribed surface lift coefficient.</li></ul><p><strong>Outputs:</strong> -<code>CLsurf::Vector{Float64}</code>: Lift coefficients for each surface.  -<code>CL::Float64</code>: Sum of lift coefficients of all surfaces. -<code>CD::Float64</code>: Sum of induced drag coefficients of all surfaces. -<code>spanef::Float64</code>: Span efficiency of combined surfaces (<span>$= (CL^2 / (œÄ*AR))/CD$</span>).</p></div></details><p>See <a href="#trefftz">theory above</a> or Sections 2.14.7 and 3.8.1 of the <a href="../../misc/dreladocs/#dreladocs">TASOPT Technical Desc</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/trefftz.jl#L54-L86">source</a></section></article><hr/><h2 id="Wing-and-tail-surfaces"><a class="docs-heading-anchor" href="#Wing-and-tail-surfaces">Wing and tail surfaces</a><a id="Wing-and-tail-surfaces-1"></a><a class="docs-heading-anchor-permalink" href="#Wing-and-tail-surfaces" title="Permalink"></a></h2><p>Lifting surface drag is determined via <code>surfcd</code> (when constant airfoil section <code>cdf</code> and <code>cdp</code> are already determined), and <code>surfcd2</code> (when an explicit modelling and integration is desired). Airfoil performance is accessed via a lookup of precomputed airfoil data, <code>airfun</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.surfcd2-NTuple{13, Any}" href="#TASOPT.aerodynamics.surfcd2-NTuple{13, Any}"><code>TASOPT.aerodynamics.surfcd2</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">  surfcd2(wing, Œ≥t, Œ≥s,
        Mach, CL, CLhtail, 
        Reco, aRexp, kSuns, fexcd,
        fduo, fdus, fdut)</code></pre><p>Calculates wing or tail surface profile <code>CD</code> by calculating the performance of wing segments explicitly via airfoil data (found in [<code>./src/air/C.air</code>] and accessed by [<code>airfun</code>], [<code>airtable</code>]). Called by <a href="#TASOPT.aerodynamics.cdsum!-NTuple{4, Any}"><code>cdsum!</code></a> if <code>icdfun</code> flag set to 1.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>Wing::TASOPT.Wing</code>: Wing Structure.</li><li><code>Œ≥t::Float64</code>: Outer-panel load  taper ratio  pt/po.</li><li><code>Œ≥s::Float64</code>: Inner-panel load  taper ratio  ps/po.</li><li><code>Mach::Float64</code>: Mach number.</li><li><code>CL::Float64</code>: Wing CL.</li><li><code>CLhtail::Float64</code>: Htail CL.</li><li><code>Reco::Float64</code>: Reynolds number for co.</li><li><code>aRexp::Float64</code>: Re-scaling exponent.</li><li><code>kSuns::Float64</code>: Shock-unsweep area constant.</li><li><code>fexcd::Float64</code>: Excrescence cd scaling factor.</li><li><code>fduo::Float64</code>, <code>fdus::Float64</code>, <code>fdut::Float64</code>: Velocity-change fractions at wing root, break (&quot;snag&quot;), and tip due to fuselage flow.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>clpo::Float64</code>,<code>clps::Float64</code>,<code>clpt::Float64</code>: Perpendicular sectional lift coefficient at wing root, break (&quot;snag&quot;), and tip.</li><li><code>CDfwing::Float64</code>: Friction profile cd in perp. plane.</li><li><code>CDpwing::Float64</code>: Pressure profile cd in perp. plane.</li><li><code>CDwing::Float64</code>: Overall profile CD.</li><li><code>CDover::Float64</code>: Fuselage added CD due to lift carryover.</li></ul></div></details><p>See Sections 2.14.3 and 3.8.3 of TASOPT Technical Desc. See also <a href="#TASOPT.aerodynamics.cdsum!-NTuple{4, Any}"><code>cdsum!</code></a>, <a href="#TASOPT.aerodynamics.surfcd-NTuple{15, Any}"><code>surfcd</code></a>, [<code>surfcm</code>], and [<code>airfun</code>].</p><div class="admonition is-compat"><header class="admonition-header">Future Changes</header><div class="admonition-body"><p>This function will be renamed for clarity of use.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/surfcd.jl#L1-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.surfcd-NTuple{15, Any}" href="#TASOPT.aerodynamics.surfcd-NTuple{15, Any}"><code>TASOPT.aerodynamics.surfcd</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">surfcd(S, 
b, bs, bo, 
Œªt, Œªs, sweep, 
co, cdf, cdp, 
Reco, Reref, 
aRexp, kSuns, fCDcen)</code></pre><p>Computes wing or tail surface profile CD from pre-computed chord quantities and corrections. Called by <a href="#TASOPT.aerodynamics.cdsum!-NTuple{4, Any}"><code>cdsum!</code></a> if <code>icdfun</code> flag set to 0.</p><div class="admonition is-compat"><header class="admonition-header">Future Changes</header><div class="admonition-body"><p>This function may be renamed for clarity of use.</p></div></div><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>S::Float64</code>: reference area.</li><li><code>b::Float64</code>: span.</li><li><code>bs::Float64</code>: outer panel break span.</li><li><code>bo::Float64</code>: wing-root (fuselage) span.</li><li><code>Œªt::Float64</code>: outer-panel taper ratio  <span>$ct/co$</span>.</li><li><code>Œªs::Float64</code>: inner-panel taper ratio  <span>$cs/co$</span>.</li><li><code>sweep::Float64</code>: wing sweep, degrees.</li><li><code>co::Float64</code>: wing root chord.</li><li><code>cdf::Float64</code>: friction profile cd.</li><li><code>cdp::Float64</code>: pressure profile cd.</li><li><code>Reco::Float64</code>: Reynolds number for co.</li><li><code>Reref::Float64</code>: reference Reynolds number for cd scaling.</li><li><code>aRexp::Float64</code>: Re-scaling exponent.</li><li><code>kSuns::Float64</code>: shock-unsweep area constant.</li><li><code>fCDcen::Float64</code> : related to fraction of wing BLI (see Eqns. 619 - 621).</li></ul><p><strong>Outputs:</strong></p><ul><li><code>CDsurf</code>: overall profile CD.</li><li><code>CDover</code>: fuselage added CD due to lift carryover.</li></ul></div></details><p>See Sections 2.14.3 and 3.8.3 of the <a href="../../misc/dreladocs/#dreladocs">TASOPT Technical Desc</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/surfcd.jl#L174-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.airtable-Tuple{Any}" href="#TASOPT.aerodynamics.airtable-Tuple{Any}"><code>TASOPT.aerodynamics.airtable</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">airtable(fname)</code></pre><p>Reads airfoil file and outputs the matrix and splines as an <code>airfoil</code>.</p><p>The airfoil data is stored as a function of three variables, typically Mach number <span>$\mathrm{Ma}$</span>, lift coefficient <span>$c_l$</span>, and thickness to chord ratio <span>$\tau$</span>.</p><pre><code class="nohighlight hljs">cdf(Ma, cl, œÑ), cdp(Ma, cl, œÑ), cm(Ma, cl, œÑ)</code></pre><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>fname::String</code>: Path to file.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>airf::TASOPT.aerodynamics.airfoil</code>: struct with airfoil performance characteristics.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/airtable.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.airfun-Tuple{Any, Any, Any, TASOPT.aerodynamics.airfoil}" href="#TASOPT.aerodynamics.airfun-Tuple{Any, Any, Any, TASOPT.aerodynamics.airfoil}"><code>TASOPT.aerodynamics.airfun</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">airfun(cl, œÑ, Mach, air::airfoil)</code></pre><p>Looks up airfoil performance data at specified conditions, as precomputed and found in <code>./src/airfoil_data/</code>.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong>      </p><ul><li><code>cl::Float64</code>: Airfoil section lift coefficient.</li><li><code>œÑ::Float64</code>: Airfoil section thickness-to-chord ratio.</li><li><code>Mach::Float64</code>: Mach number.</li><li><code>air::TASOPT.aerodynamics.airfoil</code>: <code>airfoil</code> structure with performance data.</li></ul><p><strong>Outputs:</strong></p><ul><li><code>cdf::Float64</code>: Airfoil section skin friction drag.</li><li><code>cdp::Float64</code>: Airfoil section pressure drag.</li><li><code>cdw::Float64</code>: Airfoil section wave drag (unused and assumed 0 here; placeholder left for future implementation).</li><li><code>cm::Float64</code>: Airfoil section pitching moment.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/airfun.jl#L3-L20">source</a></section></article><hr/><h2 id="Total-drag-calculation"><a class="docs-heading-anchor" href="#Total-drag-calculation">Total drag calculation</a><a id="Total-drag-calculation-1"></a><a class="docs-heading-anchor-permalink" href="#Total-drag-calculation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.cdsum!-NTuple{4, Any}" href="#TASOPT.aerodynamics.cdsum!-NTuple{4, Any}"><code>TASOPT.aerodynamics.cdsum!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>cdsum!(ac, imission, ip, icdfun)</p><p>Calculates aircraft <code>CD</code> components for operating point, ipoint. If <code>icdfun=1</code>, computes wing <code>cdf</code>,<code>cdp</code> from airfoil database # <code>iairf</code>, otherwise uses default values in para array. Called by <code>mission!</code>, <code>wsize</code>, <code>takeoff!</code>, and <code>odperf!</code>.</p><p>The total drag is computed by</p><p class="math-container">\[C_{D} = C_{D, i} + C_{D,fuse} + C_{D,wing} + C_{D,over} + C_{D,htail} + C_{D,vtail} + C_{D,strut} + C_{D,nace} + \Delta C_{D,BLI,f} + \Delta C_{D,BLI,w}\]</p><p>where:</p><ul><li><span>$C_{D,i}$</span> (<code>CDi</code>) is the total induced drag including the wing and tail,</li><li><span>$C_{D,fuse}$</span> (<code>CDfuse</code>) is the fuselage profile drage computed by solving a boundary layer integral equation,</li><li><span>$C_{D,wing}$</span> (<code>CDwing</code>) is the wing profile drag (viscous + pressure) computed using airfoil data obtained from CFD,</li><li><span>$C_{D,over}$</span> (<code>CDover</code>) is the fuselage added CD due to lift carryover,</li><li><span>$C_{D,htail}$</span> (<code>CDhtail</code>) is the horizontal tail profile drag computed in a similar manner with <code>CDwing</code>,</li><li><span>$C_{D,vtail}$</span> (<code>CDvtail</code>) is the vertical tail profile drag computed in a similar manner with <code>CDwing</code>,</li><li><span>$C_{D,strut}$</span> (<code>CDstrut</code>) is the struct profile drag, </li><li><span>$C_{D,nace}$</span> (<code>CDnace</code>) is the nacelle profile drag,</li><li><span>$\Delta C_{D,BLI,f}$</span> (<code>dCDBLIf</code>) is related to the boundary layer ingestion on the fuselage,</li><li>and <span>$\Delta C_{D,BLI,w}$</span> (<code>dCDBLIw</code>) is related to the boundary layer ingestion on the wing.</li></ul><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"></div></details><p><strong>Inputs:</strong>       - <code>ac::aircraft</code>: aircraft data storage object       - <code>imission::Int64</code>: mission index       - <code>icdfun::Int64</code>: Flag if drag should be computed (=1) or if para values should be used (=0).</p><pre><code class="nohighlight hljs">  **Outputs:**
  - No explicit outputs. Computed drag values are saved to `para` of `aircraft` model.</code></pre><p>See Section 2.14 of the <a href="../../misc/dreladocs/#dreladocs">TASOPT Technical Desc</a>. See also <a href="#TASOPT.aerodynamics.trefftz1-NTuple{32, Any}"><code>trefftz1</code></a>, <a href="../../sizing/sizing/#TASOPT.aerodynamics.fusebl!"><code>fusebl!</code></a>, <a href="#TASOPT.aerodynamics.surfcd2-NTuple{13, Any}"><code>surfcd2</code></a>, <a href="#TASOPT.aerodynamics.surfcd-NTuple{15, Any}"><code>surfcd</code></a>, <a href="#TASOPT.aerodynamics.cfturb"><code>cfturb</code></a>, and <code>cditrp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/cdsum.jl#L1-L38">source</a></section></article><hr/><h2 id="Other-utilities"><a class="docs-heading-anchor" href="#Other-utilities">Other utilities</a><a id="Other-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Other-utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.aerodynamics.cfturb" href="#TASOPT.aerodynamics.cfturb"><code>TASOPT.aerodynamics.cfturb</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">  cfturb(Re)</code></pre><p>Returns the total <span>$C_f$</span> for turbulent flat plate (one side) as a function of <span>$\mathrm{Re}_l$</span></p><p class="math-container">\[C_{f, turb} = \frac{0.523}{(\log(0.06\mathrm{Re}))^2} \]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/367510af128a3fb5404f0e2d17648a1e4b23b1ee/src/aero/cdsum.jl#L379-L389">source</a></section></article><p>For example, the turbulent flat plate <span>$C_f$</span> for a <span>$Re$</span> of <span>$10e6$</span> can be calculated as follows:</p><pre><code class="language-julia hljs">Re = 10e6
cfturb(Re)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.002954557862895432</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lift/">¬´ Lift</a><a class="docs-footer-nextpage" href="../moment/">Pitching moment ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 20 February 2025 19:26">Thursday 20 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

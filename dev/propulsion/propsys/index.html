<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Propulsion system ¬∑ TASOPT.jl</title><meta name="title" content="Propulsion system ¬∑ TASOPT.jl"/><meta property="og:title" content="Propulsion system ¬∑ TASOPT.jl"/><meta property="twitter:title" content="Propulsion system ¬∑ TASOPT.jl"/><meta name="description" content="Documentation for TASOPT.jl."/><meta property="og:description" content="Documentation for TASOPT.jl."/><meta property="twitter:description" content="Documentation for TASOPT.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TASOPT.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/loadingrunning/">Loading and running</a></li><li><a class="tocitem" href="../../examples/payload_range/">Payload-range diagram</a></li><li><a class="tocitem" href="../../examples/optimization/">Multivariable optimization</a></li></ul></li><li><span class="tocitem">Aerodynamics</span><ul><li><a class="tocitem" href="../../aero/geometry/">Geometry</a></li><li><a class="tocitem" href="../../aero/lift/">Lift</a></li><li><a class="tocitem" href="../../aero/drag/">Drag</a></li><li><a class="tocitem" href="../../aero/moment/">Pitching moment</a></li><li><a class="tocitem" href="../../atmos/atmos/">Atmospheric properties</a></li></ul></li><li><span class="tocitem">Structures</span><ul><li><a class="tocitem" href="../../structures/wing/">Wings and tails</a></li><li><a class="tocitem" href="../../structures/fuselage/">Fuselage</a></li></ul></li><li><span class="tocitem">Cryogenic tanks</span><ul><li><a class="tocitem" href="../../cryo_tank/cryotank/">Homogeneous model</a></li><li><a class="tocitem" href="../../cryo_tank/fueltanks/">Thermal and structural models</a></li></ul></li><li><span class="tocitem">Propulsion systems</span><ul><li class="is-active"><a class="tocitem" href>Propulsion system</a><ul class="internal"><li><a class="tocitem" href="#Turbofan-model"><span>Turbofan model</span></a></li><li><a class="tocitem" href="#Turbofan-Maps"><span>Turbofan Maps</span></a></li><li><a class="tocitem" href="#Turbofan-Cooling"><span>Turbofan Cooling</span></a></li></ul></li><li><a class="tocitem" href="../gascalc/">Gas Calculations</a></li><li><a class="tocitem" href="../hxfun/">Heat exchangers</a></li><li><a class="tocitem" href="../PEMfuelcell/">PEM fuel cells</a></li></ul></li><li><a class="tocitem" href="../../balance/balance/">Stability</a></li><li><span class="tocitem">Mission and sizing</span><ul><li><a class="tocitem" href="../../sizing/sizing/">Design and evaluation</a></li><li><a class="tocitem" href="../../sizing/weightmodels/">Weight models</a></li></ul></li><li><span class="tocitem">Data and I/O</span><ul><li><a class="tocitem" href="../../data_io/data_basics/">Data structure basics</a></li><li><a class="tocitem" href="../../data_io/data_io/">Loading and saving models</a></li></ul></li><li><span class="tocitem">Miscellaneous</span><ul><li><a class="tocitem" href="../../misc/structs/">Data structures</a></li><li><a class="tocitem" href="../../misc/dreladocs/">Original Drela docs</a></li><li><a class="tocitem" href="../../misc/misc/">Other utilities</a></li><li><a class="tocitem" href="../../misc/fordevs/">Notes for devs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Propulsion systems</a></li><li class="is-active"><a href>Propulsion system</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Propulsion system</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl/blob/main/docs/src/propulsion/propsys.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Propulsion-system"><a class="docs-heading-anchor" href="#Propulsion-system">Propulsion system</a><a id="Propulsion-system-1"></a><a class="docs-heading-anchor-permalink" href="#Propulsion-system" title="Permalink"></a></h1><p>A turbofan model is provided in <code>TASOPT.jl</code></p><h2 id="Turbofan-model"><a class="docs-heading-anchor" href="#Turbofan-model">Turbofan model</a><a id="Turbofan-model-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-model" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.tfcalc!" href="#TASOPT.engine.tfcalc!"><code>TASOPT.engine.tfcalc!</code></a> ‚Äî <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tfcalc(pari,parg,para,pare, ip, icall,icool,initeng)</code></pre><p>Calls function tfsize or tfoper for one operating point.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Input:</strong></p><ul><li><p><code>icall</code>:    0  call on-design  sizing   routine tfsize             1  call off-design analysis routine tfoper, specified Tt4             2  call off-design analysis routine tfoper, specified Fe</p></li><li><p><code>icool</code>:    0  use zero cooling mass flow ratio regardless             1  use specified cooling flow ratios epsrow(.), calculate Tmrow(.)             2  use specified metal temperatures  Tmrow(.) , calculate epsrow(.)</p></li><li><p><code>initeng</code>:    0  initialize variables for iteration in TFOPER           1  use current variables as initial guesses in TFOPER</p></li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfcalc.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.tfsize!" href="#TASOPT.engine.tfsize!"><code>TASOPT.engine.tfsize!</code></a> ‚Äî <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tfsize!(gee, M0, T0, p0, a0, M2, M25,
  Feng, Phiinl, Kinl, iBLIc,
  BPR, pif, pilc, pihc,
  pid, pib, pifn, pitn,
  Ttf, ifuel, etab,
  epf0, eplc0, ephc0, epht0, eplt0,
  pifK, epfK,
  mofft, Pofft,
  Tt9, pt9, Tt4,
  epsl, epsh,
  icool,
  Mtexit, dTstrk, StA, efilm, tfilm,
  M4a, ruc,
  ncrowx, ncrow,
  epsrow, Tmrow, 
  Œîh_PreC, Œîh_InterC, Œîh_Regen, Œîh_TurbC,
  Œîp_PreC, Œîp_InterC, Œîp_Regen)</code></pre><p>Turbofan performance and sizing routine.</p><p>Calculation procedure follows that of Kerrebrock, but the usual gas property formulas are replaced by function calls, which can therefore implement more general gas models.   In addition, a turbine cooling model is added.</p><p>The gas routines reside in the following source files:     gascalc.f  Routines for various processes (compressor, turbine, combustor, etc)     gasfun.f   Routines for computing cp[T], h[t], sigma[T], R, called by the routines in gascalc.f</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><p><code>gee</code>:     gravity acceleration</p></li><li><p><code>M0</code>:      freestream Mach</p></li><li><p><code>T0</code>:      freestream temperature  [K]</p></li><li><p><code>p0</code>:      freestream pressure  [Pa]</p></li><li><p><code>M2</code>:      fan-face Mach number</p></li><li><p><code>M25</code>:     HPC-face Mach number</p></li><li><p><code>Feng</code>:    required net thrust  (PK<em>inl+PK</em>out-Phi_jet)/u0  =  sum( mdot u)</p></li><li><p><code>Phiinl</code>:  inlet ingested dissipation</p></li><li><p><code>iBLIc</code>:   0=core in clear flow, 1=core sees Phiinl</p></li><li><p><code>BPR</code>:     bypass ratio  = mdot<em>fan/mdot</em>core</p></li><li><p><code>pif</code>:     fan      pressure ratio  ( = pt7 /pt2)</p></li><li><p><code>pilc</code>:    LP comp  pressure ratio  ( = pt25/pt2)</p></li><li><p><code>pihc</code>:    HP comp  pressure ratio  ( = pt3 /pt25)</p></li><li><p><code>pid</code>:     diffuser pressure ratio  ( = pt2 /pt0)</p></li><li><p><code>pib</code>:     burner   pressure ratio  ( = pt4 /pt3)</p></li><li><p><code>pifn</code>:    fan     nozzle pressure ratio  ( = pt7/pt2.1)</p></li><li><p><code>pitn</code>:    turbine nozzle pressure ratio  ( = pt5/pt4.9)</p></li><li><p><code>Ttf</code>:     fuel temperature entering combustor</p></li><li><p><code>ifuel</code>:   fuel index, see function gasfun (in gasfun.f)</p></li><li><p><code>etab</code>:    combustor efficiency (fraction of fuel burned)</p></li><li><p><code>epf0</code>:    fan max polytropic efficiency</p></li><li><p><code>eplc0</code>:   LPC max polytropic efficiency</p></li><li><p><code>ephc0</code>:   HPC max polytropic efficiency</p></li><li><p><code>epht0</code>:   HPT max polytropic efficiency</p></li><li><p><code>eplt0</code>:   LPT max polytropic efficiency</p></li><li><p><code>pifK</code>:    fan efficiency FPR offset:    epolf = epf0 + epfK*(pif-pifK)</p></li><li><p><code>epfK</code>:    fan efficiency pif derivative</p></li><li><p><code>mofft</code>:    mass flow offtake at LPC discharge station 2.5</p></li><li><p><code>Pofft</code>:    low spool power offtake</p></li><li><p><code>Tt9</code>:     offtake air discharge total temperature</p></li><li><p><code>pt9</code>:     offtake air discharge total pressure</p></li><li><p><code>epsl</code>:    low  spool power loss fraction</p></li><li><p><code>epsh</code>:    high spool power loss fraction</p></li><li><p>`icool   turbine cooling flag          0 = no cooling, ignore all cooling parameters below          1 = usual cooling, using passed-in fcool          2 = usual cooling, but set (and return) fcool from Tmetal</p></li><li><p><code>Mtexit</code>:   turbine blade-row exit Mach, for setting temperature drops</p></li><li><p><code>dTstrk</code>:   hot-streak temperature delta {K}, used only if icool=2</p></li><li><p><code>StA</code>:      area-weighted Stanton number    , used only if icool=2</p></li><li><p><code>M4a</code>:      effective Mach at cooling-flow outlet (start of mixing)</p></li><li><p><code>ruc</code>:      cooling-flow outlet velocity ratio, u/ue</p></li><li><p><code>ncrowx</code>:      dimension of epsrow array</p></li><li><p><code>ncrow</code>:       number of blade rows requiring cooling</p></li><li><p><code>epsrow(.)</code>:   input specified  cooling-flow bypass ratio if icool=1                output resulting cooling-flow bypass ratio if icool=2</p></li><li><p><code>Tmrow(.)</code>:    input specified  metal temperature  [K]    if icool=2                output resulting metal temperature  [K]    if icool=1</p><p><strong>Outputs:</strong></p></li><li><p><code>epsrow(.)</code>:   see above</p></li><li><p><code>Tmrow(.)</code>:    see above</p></li><li><p><code>TSFC</code>:    thrust specific fuel consumption = mdot_fuel g / F   [1/s]</p></li><li><p><code>Fsp</code>:     specific thrust  = F / (mdot u0) = F / ((1+BPR) mdot_core u0)</p></li><li><p><code>hfuel</code>:   fuel heating value   [J / kg K]</p></li><li><p><code>ff</code>:      fuel mass flow fraction  =  mdot<em>fuel / mdot</em>core</p></li><li><p><code>mcore</code>:   core mass flow = mdot_core  [kg/s]</p></li><li><p><code>A2</code>:      fan-face area [m^2]</p></li><li><p><code>A25</code>:     HPC-face area [m^2]</p></li><li><p><code>A5</code>:      core nozzle area [m^2]</p></li><li><p><code>A7</code>:      fan  nozzle area [m^2]</p></li><li><p><code>A6</code>:      core plume  area [m^2]</p></li><li><p><code>A8</code>:      fan  plume  area [m^2]</p></li><li><p><code>Tt?</code>:     total temperature</p></li><li><p><code>ht?</code>:     total complete enthalpy (includes heat of formation)</p></li><li><p><code>pt?</code>:     total pressure</p></li><li><p><code>cpt?</code>:    specific heat at stagnation temperature  (= dh/dT)</p></li><li><p><code>Rt?</code>:     gas constant  at stagnation conditions</p></li><li><p><code>T?</code>:      static temperature</p></li><li><p><code>u?</code>:      velocity</p></li><li><p><code>epf</code>:     fan polytropic efficiency</p></li><li><p><code>eplc</code>:    LPC polytropic efficiency</p></li><li><p><code>ephc</code>:    HPC polytropic efficiency</p></li><li><p><code>epht</code>:    HPT polytropic efficiency</p></li><li><p><code>eplt</code>:    LPT polytropic efficiency</p></li><li><p><code>etaf</code>:    fan overall efficiency</p></li><li><p><code>etalc</code>:   LPC overall efficiency</p></li><li><p><code>etahc</code>:   HPC overall efficiency</p></li><li><p><code>etaht</code>:   HPT overall efficiency</p></li><li><p><code>etalt</code>:   LPT overall efficiency</p></li><li><p><code>Lconv</code>:   T if convergence was successful, F otherwise</p></li></ul><p>The &quot;?&quot; symbol denotes the station index:   0  freestream   18 fan face outside of casing BLs   19 fan face over LPC portion   2  fan face over fan portion   21 fan exit   25 LPC exit, HPC inlet   3  compressor exit   4  combustor exit before cooling air addition   41 turbine  inlet after  cooling air addition   45 HPT exit, LPT inlet   49 LPT exit   5  core nozzle   6  core flow downstream   7  fan nozzle   8  fan flow downstream</p></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfsize.jl#L1-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.tfweight" href="#TASOPT.engine.tfweight"><code>TASOPT.engine.tfweight</code></a> ‚Äî <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">  tfweight(iengwgt, Gearf, OPR, BPR, mdotc, dfan, rSnace,
  dlcomp, neng, feadd, fpylon)</code></pre><p>Engine weight estimation function using Giulia Pantalone, Drela, or Fitzgerald model.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Input:</strong></p><ul><li><code>iengwgt</code>: Engine model index, Drela=0, Fitzgerald=1, and Pantalone&gt;=3, </li><li><code>OPR</code>: Overall pressure ratio.</li><li><code>BPR</code>: By-pass ratio.</li><li><code>mdotc</code>: Engine core mass flow rate.</li><li><code>dfan</code>: Fan diameter.</li><li><code>rSnace</code>: </li><li><code>dlcomp</code>:</li><li><code>neng</code>: Number of engines.</li><li><code>feadd</code>: Fuel system weight ratio.</li><li><code>fpylon</code>: Pylon weight fraction.</li></ul><p><strong>Output:</strong></p><ul><li><code>Weng</code>: Total engine weight.</li><li><code>Wnac</code>: Nacelle weight. </li><li><code>Webare</code>: Bare engine weight.</li><li><code>Snace1</code>: Nacelle area.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfweight.jl#L1-L25">source</a></section></article><h2 id="Turbofan-Maps"><a class="docs-heading-anchor" href="#Turbofan-Maps">Turbofan Maps</a><a id="Turbofan-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-Maps" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.Ncmap-NTuple{6, Any}" href="#TASOPT.engine.Ncmap-NTuple{6, Any}"><code>TASOPT.engine.Ncmap</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Ncmap(pratio, mb, piD, mbD, NbD, Cmap)</code></pre><p>Calculates compressor or fan corrected speed as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>: pressure ratio </li><li><code>mb</code>:       corrected mass flow</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>Cmap(.)</code>:  map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>Nb</code>:     wheel speed</li><li><code>Nb_?</code>:   derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L1-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.ecmap-NTuple{8, Any}" href="#TASOPT.engine.ecmap-NTuple{8, Any}"><code>TASOPT.engine.ecmap</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ecmap(pratio, mb, piD, mbD, Cmap, effo, piK, effK)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>Cmap(.)</code>:   map constants</li><li><code>effo</code>:      maximum efficiency</li><li><code>piK</code>:       pi-dependence offset  eff = effo + effK*(pi-piK)</li><li><code>effK</code>:      pi-dependence slope</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L115-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.Ncmap1-NTuple{9, Any}" href="#TASOPT.engine.Ncmap1-NTuple{9, Any}"><code>TASOPT.engine.Ncmap1</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Ncmap1(pratio, m, piD, mbD, NbD, ABCDm, iabcd, Tr, pr)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>ABCDm</code>:   map constants</li><li><code>iabcd</code>:   map exponents</li><li><code>Tr</code>:      T/Tref</li><li><code>pr</code>:      p/pref</li></ul><p><strong>Outputs:</strong></p><ul><li><code>N</code>:        wheel speed</li><li><code>N_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L203-L224">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.ecmap1-NTuple{9, Any}" href="#TASOPT.engine.ecmap1-NTuple{9, Any}"><code>TASOPT.engine.ecmap1</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ecmap1(pratio, m, piD, mbD, ABCDm, iabcd, effo, Tr, pr)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>ABCDm</code>:   map constants</li><li><code>iabcd</code>:   map exponents</li><li><code>effo</code>:     maximum efficiency</li><li><code>Tr</code>:      T/Tref</li><li><code>pr</code>:      p/pref</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L271-L292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.etmap-NTuple{11, Any}" href="#TASOPT.engine.etmap-NTuple{11, Any}"><code>TASOPT.engine.etmap</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">etmap(dh, mb, Nb, piD, mbD, NbD, ept0, Tmap, Tt, cpt, Rt)</code></pre><p>Calculates turbine efficiency as a function of work and corrected mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>dh</code>:        enthalpy change</li><li><code>mb</code>:        corrected mass flow</li><li><code>Nb</code>:        corrected speed</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>ept0</code>:      turbine polytropic efficiency estimate</li><li><code>Tmap(.)</code>:   map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L345-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.Pimap-NTuple{6, Any}" href="#TASOPT.engine.Pimap-NTuple{6, Any}"><code>TASOPT.engine.Pimap</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Pimap(mb, Nb, piD, mbD, NbD, Cmap)</code></pre><p>Calculates compressor or fan pressure ratio as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>mb</code>:        corrected mass flow</li><li><code>Nb</code>:        corrected speed</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>Cmap(.)</code>:  map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>pratio</code>:      pressure ratio</li><li><code>pi_?</code>:    derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfmap.jl#L415-L433">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.tfoper!" href="#TASOPT.engine.tfoper!"><code>TASOPT.engine.tfoper!</code></a> ‚Äî <span class="docstring-category">Function</span></header><section><div><p>function tfoper!(gee, M0, T0, p0, a0, Tref, pref,       Phiinl, Kinl, iBLIc,       pid, pib, pifn, pitn,       Gearf,       pifD, pilcD, pihcD, pihtD, piltD,       mbfD, mblcD, mbhcD, mbhtD, mbltD,       NbfD, NblcD, NbhcD, NbhtD, NbltD,       A2, A25, A5, A7,       iTFspec,       Ttf, ifuel, etab,       epf0, eplc0, ephc0, epht0, eplt0,       pifK, epfK,       mofft, Pofft,       Tt9, pt9,       epsl, epsh,       icool,       Mtexit, dTstrk, StA, efilm, tfilm,       M4a, ruc,       ncrowx, ncrow,       epsrow, Tmrow,       Feng,       M2, pif, pilc, pihc, mbf, mblc, mbhc, Tt4, pt5, mcore, M25)</p><p>Turbofan operation routine</p><pre><code class="nohighlight hljs">Calculation procedure follows that of Kerrebrock,
but the usual gas property formulas are replaced
by function calls, which can therefore implement
more general gas models.  
In addition, a turbine cooling model is added.

The gas routines reside in the following source files:
 gascalc.f  Routines for various processes 
            (compressor, turbine, combustor, etc)
 gasfun.f   Routines for computing cp[T], h[t], sigma[T], R,
            called by the routines in gascalc.f</code></pre><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><p><code>gee</code>:     gravity acceleration</p></li><li><p><code>M0</code>:      freestream Mach</p></li><li><p><code>T0</code>:      freestream temperature  [K]</p></li><li><p><code>p0</code>:      freestream pressure  [Pa]</p></li><li><p><code>Tref</code>:    reference temperature for corrected mass flow and speed</p></li><li><p><code>pref</code>:    reference pressure for corrected mass flow</p></li><li><p><code>Phiinl</code>:  inlet ingested dissipation  Phi_inl</p></li><li><p><code>iBLIc</code>:   0=core in clear flow, 1=core sees Phiinl</p></li><li><p><code>pid</code>:     diffuser pressure ratio  ( = pt2/pt0)</p></li><li><p><code>pib</code>:     burner   pressure ratio  ( = pt4/pt3)</p></li><li><p><code>pifn</code>:    fan     nozzle pressure ratio  ( = pt7/pt6.9)</p></li><li><p><code>pitn</code>:    turbine nozzle pressure ratio  ( = pt5/pt4.9)</p></li><li><p><code>Gearf</code>:   fan gear ratio  ( = Nl/Nf )</p></li><li><p><code>pifD</code>:    design fan pressure ratio  ( = pt21/pt2 )</p></li><li><p><code>pilcD</code>:   design LPC pressure ratio  ( = pt25/pt19)</p></li><li><p><code>pihcD</code>:   design HPC pressure ratio  ( = pt3 /pt25)</p></li><li><p><code>pihtD</code>:   design HPT pressure ratio  ( = pt45/pt41)</p></li><li><p><code>piltD</code>:   design LPT pressure ratio  ( = pt49/pt45)</p></li><li><p><code>mbfD</code>:    design corrected fan mass flow ( = mf*sqrt(Tt2 /Tref)/(pt2 /pref) )</p></li><li><p><code>mblcD</code>:   design corrected LPC mass flow ( = mc*sqrt(Tt19/Tref)/(pt19/pref) )</p></li><li><p><code>mbhcD</code>:   design corrected HLC mass flow ( = mc*sqrt(Tt25/Tref)/(pt25/pref) )</p></li><li><p><code>mbhtD</code>:   design corrected HPT mass flow ( = mt*sqrt(Tt41/Tref)/(pt41/pref) )</p></li><li><p><code>mbltD</code>:   design corrected LPT mass flow ( = mt*sqrt(Tt45/Tref)/(pt45/pref) )</p></li><li><p><code>NbfD</code>:    design corrected fan speed ( = Nf/sqrt(Tt2 /Tref) )</p></li><li><p><code>NblcD</code>:   design corrected LPC speed ( = Nl/sqrt(Tt19/Tref) )</p></li><li><p><code>NbhcD</code>:   design corrected HPC speed ( = Nh/sqrt(Tt25/Tref) )</p></li><li><p><code>NbhtD</code>:   design corrected HPT speed ( = Nh/sqrt(Tt41/Tref) )</p></li><li><p><code>NbltD</code>:   design corrected LPT speed ( = Nl/sqrt(Tt45/Tref) )</p></li><li><p><code>A2</code>:      fan-face area [m^2]                mf = mc<em>BPR, mt = mc</em>(1+ff)</p></li><li><p><code>A25</code>:     HPC-face area [m^2]</p></li><li><p><code>A5</code>:      core nozzle area [m^2]</p></li><li><p><code>A7</code>:      fan  nozzle area [m^2]</p></li><li><p><code>iTFspec</code>:   = 1 Tt4  is specified              = 2 Feng is specified</p></li><li><p><code>Tt4</code>:     turbine-inlet total temperature [K]</p></li><li><p><code>Ttf</code>:     fuel temperature entering combustor</p></li><li><p><code>ifuel</code>:   fuel index, see function gasfun (in gasfun.f)</p></li><li><p><code>etab</code>:    combustor efficiency (fraction of fuel burned)</p></li><li><p><code>epf0</code>:    max fan polytropic efficiency</p></li><li><p><code>eplc0</code>:   LPC max polytropic efficiency</p></li><li><p><code>ephc0</code>:   HPC max polytropic efficiency</p></li><li><p><code>epht0</code>:   HPT max polytropic efficiency</p></li><li><p><code>eplt0</code>:   LPT max polytropic efficiency</p></li><li><p><code>pifK</code>:    fan efficiency FPR offset:    epolf = epf0 + epfK*(pif-pifK)</p></li><li><p><code>epfK</code>:    fan efficiency pif derivative</p></li><li><p><code>mofft</code>:    mass flow offtake at LPC discharge station 2.5</p></li><li><p><code>Pofft</code>:    low spool power offtake</p></li><li><p><code>Tt9</code>:     offtake air discharge total temperature</p></li><li><p><code>pt9</code>:     offtake air discharge total pressure</p></li><li><p><code>epsl</code>:    low  spool power loss fraction</p></li><li><p><code>epsh</code>:    high spool power loss fraction</p></li><li><p><code>icool</code>:    turbine cooling flag             0 = no cooling, ignore all cooling parameters below             1 = usual cooling, using passed-in fc             2 = usual cooling, but set (and return) fc from Tmetal</p></li><li><p><code>Mtexit</code>:   turbine blade-row exit Mach, for setting temperature drops</p></li><li><p><code>Tmetal</code>:   specified metal temperature  [K], used only if icool=2</p></li><li><p><code>dTstrk</code>:   hot-streak temperature delta {K}, used only if icool=2</p></li><li><p><code>StA</code>:      area-weighted Stanton number    , used only if icool=2</p></li><li><p><code>M4a</code>:      effective Mach at cooling-flow outlet (start of mixing)</p></li><li><p><code>ruc</code>:      cooling-flow outlet velocity ratio, u/ue</p></li><li><p><code>ncrowx</code>:      dimension of epsrow array</p></li><li><p><code>ncrow</code>:       number of blade rows requiring cooling</p></li><li><p><code>epsrow(.)</code>:   input specified  cooling-flow bypass ratio if icool=1                output resulting cooling-flow bypass ratio if icool=2</p></li><li><p><code>Tmrow(.)</code>:    input specified  metal temperature  [K]    if icool=2                output resulting metal temperature  [K]    if icool=1</p><p><strong>Output:</strong></p></li></ul><hr/><ul><li><code>epsrow(.)</code>:   see above</li><li><code>Tmrow(.)</code>:    see above</li><li><code>TSFC</code>:    thrust specific fuel consumption = mdot_fuel g / F   [1/s]</li><li><code>Fsp</code>:     specific thrust  = F / (mdot u0) = F / ((1+BPR) mdot_core u0)</li><li><code>hfuel</code>:   fuel heating value   [J / kg K]</li><li><code>ff</code>:      fuel mass flow fraction  =  mdot<em>fuel / mdot</em>core</li><li><code>Feng</code>:    net effective thrust  = (PK<em>inl+PK</em>out-Phi_jet)/u0  =  sum( mdot u)</li><li><code>mcore</code>:   core mass flow = mdot_core  [kg/s]</li><li><code>BPR</code>:     bypass ratio   = mdot<em>fan/mdot</em>core</li><li><code>Tt?</code>:     total temperature</li><li><code>ht?</code>:     total complete enthalpy (includes heat of formation)</li><li><code>pt?</code>:     total pressure</li><li><code>cpt?</code>:    specific heat at stagnation temperature  (= dh/dT)</li><li><code>Rt?</code>:     gas constant  at stagnation conditions</li><li><code>T?</code>:     static temperature</li><li><code>u?</code>:      velocity</li><li><code>etaf</code>:    fan          overall efficiency</li><li><code>etac</code>:    compressor   overall efficiency</li><li><code>etatf</code>:   fan-turbine  overall efficiency</li><li><code>etatc</code>:   comp-turbine overall efficiency</li><li><code>Lconv</code>:   T if convergence was successful, F otherwise</li></ul><p>The &quot;?&quot; symbol denotes the station index:   0   freestream   18  fan face outside of casing BLs   19  fan face over LPC portion   2   fan face over fan portion   21  fan exit, precooler inlet   19c precooler outlet, LPC inlet   25  LPC exit, intercooler inlet    25c intercooler exit, HPC inlet   3   compressor exit   4   combustor exit before cooling air addition   41  turbine  inlet after  cooling air addition   45  HPT exit, LPT inlet   49  LPT exit, regenerative cooler inlet   49c regenerative cooler outlet   5   core nozzle   6   core flow downstream   7   fan nozzle   8   fan flow downstream</p></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfoper.jl#L1-L154">source</a></section></article><h2 id="Turbofan-Cooling"><a class="docs-heading-anchor" href="#Turbofan-Cooling">Turbofan Cooling</a><a id="Turbofan-Cooling-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-Cooling" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.mcool-NTuple{9, Any}" href="#TASOPT.engine.mcool-NTuple{9, Any}"><code>TASOPT.engine.mcool</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mcool(ncrowx, Tmrow, Tt3, Tt4, dTstreak, Trrat, efilm, tfilm, StA)</code></pre><p>Calculates cooling mass flow requirement.</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ncrowx</code>:    dimension of Tmrow(.),epsrow(.) arrays (max number of blade rows)</li><li><code>Tmrow(.)</code>:  design metal temperature for each blade row</li><li><code>Tt3</code>:       cooling flow temperature</li><li><code>Tt4</code>:       hot gas temperature from burner</li><li><code>dTstreak</code>:  hot-streak temperature increase over Tt4, for first blade row </li><li><code>Trrat</code>:     static temperature ratio across each blade row, T4.1 / T4</li><li><code>efilm</code>:     cooling efficiency = (Tco-Tci)/(Tmetal-Tci)</li><li><code>tfilm</code>:     film effectiveness = (Tgas-Tfaw)/(Tgas-Tco)              Tco = temperature of cooling air exiting  blade              Tci = temperature of cooling air entering blade              Tfaw = film adiabatic wall temperature (for insulated-wall case) StA`:       area-weighted external Stanton number = St (Asurf/Aflow) cpgas/cpcool</li></ul><p><strong>Output:</strong></p><ul><li><code>ncrow</code>:      number of blade rows which need cooling</li><li><code>epsrow(.)</code>:  cooling mass flow ratio for each blade row, m<em>c</em>row/m_air</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfcool.jl#L2-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TASOPT.engine.Tmcalc-NTuple{10, Any}" href="#TASOPT.engine.Tmcalc-NTuple{10, Any}"><code>TASOPT.engine.Tmcalc</code></a> ‚Äî <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Tmcalc(ncrowx, ncrow, Tt3, Tt4, dTstreak, Trrat, efilm, tfilm, StA, epsrow)</code></pre><p>Calculates metal temperature for blade row</p><details class="admonition is-details"><summary class="admonition-header">üîÉ Inputs and Outputs</summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ncrowx</code>:    dimension of Tmrow(.),epsrow(.) arrays (max number of blade rows)</li><li><code>ncrow</code>:     number of blade rows which are cooled</li><li><code>epsrow(.)</code>:  cooling mass flow ratio for each blade row, m<em>c</em>row/m_air</li><li><code>Tt3</code>:       cooling flow temperature</li><li><code>Tt4</code>:       hot gas temperature from burner</li><li><code>dTstreak</code>:  hot-streak temperature increase over Tt4, for first blade row </li><li><code>Trrat</code>:     static temperature ratio across each blade row, T4.1 / T4</li><li><code>efilm</code>:     cooling efficiency = (Tco-Tci)/(Tmetal-Tci)</li><li><code>tfilm</code>:     film effectiveness = (Tgas-Tfaw)/(Tgas-Tco)              Tco = temperature of cooling air exiting  blade              Tci = temperature of cooling air entering blade              Tfaw = film adiabatic wall temperature (for insulated-wall case)</li><li><code>StA</code>:       area-weighted external Stanton number = St (Asurf/Aflow) cpgas/cpcool<strong>Output:</strong></li><li><code>Tmrow(.)</code>:  design metal temperature for each blade row</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/a8f6df466ce8c56d4cc980e4d1f9ac08e90a7ecb/src/engine/tfcool.jl#L87-L110">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../cryo_tank/fueltanks/">¬´ Thermal and structural models</a><a class="docs-footer-nextpage" href="../gascalc/">Gas Calculations ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 13 August 2024 21:25">Tuesday 13 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

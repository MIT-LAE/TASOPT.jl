<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Propulsion system ¬∑ TASOPT.jl</title><meta name="title" content="Propulsion system ¬∑ TASOPT.jl"/><meta property="og:title" content="Propulsion system ¬∑ TASOPT.jl"/><meta property="twitter:title" content="Propulsion system ¬∑ TASOPT.jl"/><meta name="description" content="Documentation for TASOPT.jl."/><meta property="og:description" content="Documentation for TASOPT.jl."/><meta property="twitter:description" content="Documentation for TASOPT.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TASOPT.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/loadingrunning/">Loading and running</a></li><li><a class="tocitem" href="../../examples/payload_range/">Payload-range diagram</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/NM_optimization/">Nelder Mead</a></li><li><a class="tocitem" href="../../examples/gradient_based_optimization/">Gradient Based Optimization</a></li></ul></li><li><a class="tocitem" href="../../examples/sensitivity/">Sensitivities</a></li></ul></li><li><span class="tocitem">Aerodynamics</span><ul><li><a class="tocitem" href="../../aero/aerosummary/">Summary and outputs</a></li><li><a class="tocitem" href="../../aero/geometry/">Geometry</a></li><li><a class="tocitem" href="../../aero/lift/">Lift</a></li><li><a class="tocitem" href="../../aero/drag/">Drag</a></li><li><a class="tocitem" href="../../aero/moment/">Pitching moment</a></li><li><a class="tocitem" href="../../atmos/atmos/">Atmospheric properties</a></li></ul></li><li><span class="tocitem">Structures</span><ul><li><a class="tocitem" href="../../structures/wing/">Wings and tails</a></li><li><a class="tocitem" href="../../structures/fuselage/">Fuselage</a></li><li><a class="tocitem" href="../../structures/landing_gear/">Landing gear</a></li><li><a class="tocitem" href="../../structures/cabin_sizing/">Cabin sizing</a></li></ul></li><li><span class="tocitem">Propulsion systems</span><ul><li class="is-active"><a class="tocitem" href>Propulsion system</a><ul class="internal"><li><a class="tocitem" href="#Constant-TSFC-engine"><span>Constant TSFC engine</span></a></li><li><a class="tocitem" href="#Turbofan-model"><span>Turbofan model</span></a></li><li><a class="tocitem" href="#Turbofan-Maps"><span>Turbofan Maps</span></a></li><li><a class="tocitem" href="#Turbofan-Cooling"><span>Turbofan Cooling</span></a></li><li><a class="tocitem" href="#Turbomachinery-Components"><span>Turbomachinery Components</span></a></li></ul></li><li><a class="tocitem" href="../gascalc/">Gas Calculations</a></li><li><a class="tocitem" href="../hxfun/">Heat exchangers</a></li><li><a class="tocitem" href="../PEMfuelcell/">PEM fuel cells</a></li><li><a class="tocitem" href="../ElectricMachines/">Electric Machines</a></li></ul></li><li><span class="tocitem">Cryogenic tanks</span><ul><li><a class="tocitem" href="../../cryo_tank/fueltanks/">Thermal and structural models</a></li><li><a class="tocitem" href="../../cryo_tank/cryotank/">Homogeneous model</a></li></ul></li><li><a class="tocitem" href="../../balance/balance/">Stability</a></li><li><span class="tocitem">Mission and sizing</span><ul><li><a class="tocitem" href="../../sizing/sizing/">Design and evaluation</a></li><li><a class="tocitem" href="../../sizing/weightmodels/">TASOPT Weight Model</a></li></ul></li><li><span class="tocitem">Data and I/O</span><ul><li><a class="tocitem" href="../../data_io/data_basics/">Data structure basics</a></li><li><a class="tocitem" href="../../data_io/structs/">Data structure details</a></li><li><a class="tocitem" href="../../data_io/data_io/">Loading and saving models</a></li></ul></li><li><span class="tocitem">Miscellaneous</span><ul><li><a class="tocitem" href="../../misc/dreladocs/">Original Drela docs</a></li><li><a class="tocitem" href="../../misc/fordevs/">Notes for devs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Propulsion systems</a></li><li class="is-active"><a href>Propulsion system</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Propulsion system</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl/blob/main/docs/src/propulsion/propsys.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Propulsion-system"><a class="docs-heading-anchor" href="#Propulsion-system">Propulsion system</a><a id="Propulsion-system-1"></a><a class="docs-heading-anchor-permalink" href="#Propulsion-system" title="Permalink"></a></h1><p>TASOPT.jl supports multiple propulsion system weight and performance options. Currently implemented are a simple engine with a fixed specific fuel consumption, a detailed model of a turbofan engine, and auxiliary models for novel aircraft leveraging cryogenic hydrogen. Other engine models can be added following the <code>TASOPT.Engine</code> interface object.</p><h2 id="Constant-TSFC-engine"><a class="docs-heading-anchor" href="#Constant-TSFC-engine">Constant TSFC engine</a><a id="Constant-TSFC-engine-1"></a><a class="docs-heading-anchor-permalink" href="#Constant-TSFC-engine" title="Permalink"></a></h2><p>A simpler engine option is provided, consisting of an engine with a user-specified specific fuel consumptions (TSFC). As this engine is not physically sized, its weight has to be computed either as a fraction of the total maximum takeoff weight or directly specified. This engine options is also not compatible with takeoff calculations, as these are done at maximum throttle setting.</p><p>The constant TSFC engine can be called through <a href="#TASOPT.engine.constant_TSFC_engine!"><code>constant_TSFC_engine!()</code></a>. It uses <a href="#TASOPT.engine.calculate_thrust_from_ROC!"><code>calculate_thrust_from_ROC!()</code></a> to calculate the thrust required in climb from a given rate of climb.</p><h2 id="Turbofan-model"><a class="docs-heading-anchor" href="#Turbofan-model">Turbofan model</a><a id="Turbofan-model-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-model" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TASOPT.engine.tfcalc!"><a class="docstring-binding" href="#TASOPT.engine.tfcalc!"><code>TASOPT.engine.tfcalc!</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">tfcalc!(wing, engine, parg, para, pare, ip, ifuel, opt_calc_call, opt_cooling, initializes_engine)</code></pre><p>Calls on-design sizing function <a href="#TASOPT.engine.tfsize!"><code>tfsize!</code></a> or off-design analysis function <a href="#TASOPT.engine.tfoper!"><code>tfoper!</code></a> for one operating point <code>ip</code>.</p><details class="admonition is-details" id="Inputs-and-Outputs-d7e10717c45c7f02"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-d7e10717c45c7f02" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Input:</strong></p><ul><li><p><code>opt_calc_call</code>:</p><ul><li>&quot;sizing&quot;: call on-design sizing routine <code>tfsize!</code></li><li><code>&quot;oper_fixedTt4&quot;</code>: call off-design analysis routine <code>tfoper!</code> with specified Tt4</li><li><code>&quot;oper_fixedFe&quot;</code>: call off-design analysis routine <code>tfoper!</code> with specified net thrust (<code>Fe</code>)</li></ul></li><li><p><code>opt_cooling</code>: turbine cooling flag</p><ul><li>&quot;none&quot;: no cooling mass flow</li><li><code>&quot;fixed_coolingflowratio&quot;</code>: use specified cooling flow ratios <code>epsrow(.)</code>; calculate <code>Tmrow(.)</code></li><li><code>&quot;fixed_Tmetal&quot;</code>: use specified metal temperatures <code>Tmrow(.)</code>; calculate <code>epsrow(.)</code></li></ul></li><li><p><code>initializes_engine</code>:</p><ul><li><code>true</code>: initialize variables for iteration in <code>tfoper!</code></li><li><code>false</code>: use current variables as initial guesses in <code>tfoper!</code></li></ul></li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfcalc.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.tfsize!"><a class="docstring-binding" href="#TASOPT.engine.tfsize!"><code>TASOPT.engine.tfsize!</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">tfsize!(gee, M0, T0, p0, a0, M2, M25,
  Feng, Phiinl, Kinl, eng_has_BLI_cores,
  BPR, pif, pilc, pihc,
  pid, pib, pifn, pitn,
  Ttf, ifuel, etab,
  epf0, eplc0, ephc0, epht0, eplt0,
  mofft, Pofft,
  Tt9, pt9, Tt4,
  epsl, epsh,
  opt_cooling,
  Mtexit, dTstrk, StA, efilm, tfilm,
  fc0, epht_fc,
  M4a, ruc,
  ncrowx, ncrow,
  epsrow, Tmrow, 
  Œîh_PreC, Œîh_InterC, Œîh_Regen, Œîh_TurbC,
  Œîp_PreC, Œîp_InterC, Œîp_Regen)</code></pre><p>Turbofan performance and sizing routine.</p><p>Calculation procedure follows that of Kerrebrock, but the usual gas property formulas are replaced by function calls (described in <a href="../gascalc/#Gas-Calculations">Gas Calculations</a>), which can therefore implement more general gas models. In addition, a turbine cooling model is added.</p><details class="admonition is-details" id="Inputs-and-Outputs-9eb85663cb4f09b6"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-9eb85663cb4f09b6" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>gee</code>:     gravity acceleration</li><li><code>M0</code>:      freestream Mach</li><li><code>T0</code>:      freestream temperature  [K]</li><li><code>p0</code>:      freestream pressure  [Pa]</li><li><code>M2</code>:      fan-face Mach number</li><li><code>M25</code>:     HPC-face Mach number</li><li><code>Feng</code>:    required net thrust  (PK<em>inl+PK</em>out-Phi_jet)/u0  =  sum( mdot u)</li><li><code>Phiinl</code>:  inlet ingested dissipation</li><li><code>eng_has_BLI_cores</code>:   false=core in clear flow, true=core sees <code>Phiinl</code></li><li><code>BPR</code>:     bypass ratio  = <code>mdot_fan/mdot_core</code></li><li><code>pif</code>:     fan      pressure ratio  ( = pt7 /pt2)</li><li><code>pilc</code>:    LP comp  pressure ratio  ( = pt25/pt2)</li><li><code>pihc</code>:    HP comp  pressure ratio  ( = pt3 /pt25)</li><li><code>pid</code>:     diffuser pressure ratio  ( = pt2 /pt0)</li><li><code>pib</code>:     burner   pressure ratio  ( = pt4 /pt3)</li><li><code>pifn</code>:    fan     nozzle pressure ratio  ( = pt7/pt2.1)</li><li><code>pitn</code>:    turbine nozzle pressure ratio  ( = pt5/pt4.9)</li><li><code>Ttf</code>:     fuel temperature entering combustor</li><li><code>ifuel</code>:   fuel index, see function <a href="../gascalc/#TASOPT.engine.gasfun"><code>gasfun</code></a></li><li><code>hvap</code>:    fuel enthalpy of vaporization (J/kg)</li><li><code>etab</code>:    combustor efficiency (fraction of fuel burned)</li><li><code>epf0</code>:    fan max polytropic efficiency</li><li><code>eplc0</code>:   LPC max polytropic efficiency</li><li><code>ephc0</code>:   HPC max polytropic efficiency</li><li><code>epht0</code>:   HPT max polytropic efficiency</li><li><code>eplt0</code>:   LPT max polytropic efficiency</li><li><code>mofft</code>:   mass flow offtake at LPC discharge station 2.5</li><li><code>Pofft</code>:   low spool power offtake</li><li><code>Tt9</code>:     offtake air discharge total temperature</li><li><code>pt9</code>:     offtake air discharge total pressure</li><li><code>epsl</code>:    low  spool power loss fraction</li><li><code>epsh</code>:    high spool power loss fraction</li><li><code>opt_cooling</code>: turbine cooling flag<ul><li><code>&quot;none&quot;</code> = no cooling, ignore all cooling parameters below</li><li><code>&quot;fixed_coolingflowratio&quot;</code> = usual cooling, using passed-in fcool</li><li><code>&quot;fixed_Tmetal&quot;</code> = usual cooling, but set (and return) <code>fcool</code> from <code>Tmetal</code></li></ul></li><li><code>Mtexit</code>:   turbine blade-row exit Mach, for setting temperature drops</li><li><code>dTstrk</code>:   hot-streak temperature delta [K], used only if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></li><li><code>StA</code>:      area-weighted Stanton number    , used only if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></li><li><code>M4a</code>:      effective Mach at cooling-flow outlet (start of mixing)</li><li><code>ruc</code>:      cooling-flow outlet velocity ratio, u/ue</li><li><code>ncrowx</code>:      dimension of epsrow array</li><li><code>ncrow</code>:       number of blade rows requiring cooling</li><li><code>epsrow(.)</code>:   specified cooling-flow bypass ratio if <code>opt_cooling=&quot;fixed_coolingflowratio&quot;</code></li><li><code>Tmrow(.)</code>:    specified metal temperature [K] if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></li></ul><p><strong>Outputs:</strong></p><ul><li><code>epsrow(.)</code>:   resulting cooling-flow bypass ratio if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></li><li><code>Tmrow(.)</code>:    resulting metal temperature [K] if <code>opt_cooling=&quot;fixed_coolingflowratio&quot;</code></li><li><code>TSFC</code>:    thrust specific fuel consumption = <code>mdot_fuel g / F</code>   [1/s]</li><li><code>Fsp</code>:     specific thrust  = <code>F / (mdot u0) = F / ((1+BPR) mdot_core u0)</code></li><li><code>hfuel</code>:   fuel heating value   [J / kg K]</li><li><code>ff</code>:      fuel mass flow fraction  =  <code>mdot_fuel / mdot_core</code></li><li><code>mcore</code>:   core mass flow = <code>mdot_core</code>  [kg/s]</li><li><code>A2</code>:      fan-face area [m^2]</li><li><code>A25</code>:     HPC-face area [m^2]</li><li><code>A5</code>:      core nozzle area [m^2]</li><li><code>A7</code>:      fan  nozzle area [m^2]</li><li><code>A6</code>:      core plume  area [m^2]</li><li><code>A8</code>:      fan  plume  area [m^2]</li><li><code>Tt?</code>:     total temperature</li><li><code>ht?</code>:     total complete enthalpy (includes heat of formation)</li><li><code>pt?</code>:     total pressure</li><li><code>cpt?</code>:    specific heat at stagnation temperature  (= <code>dh/dT</code>)</li><li><code>Rt?</code>:     gas constant  at stagnation conditions</li><li><code>T?</code>:      static temperature</li><li><code>u?</code>:      velocity</li><li><code>epf</code>:     fan polytropic efficiency</li><li><code>eplc</code>:    LPC polytropic efficiency</li><li><code>ephc</code>:    HPC polytropic efficiency</li><li><code>epht</code>:    HPT polytropic efficiency</li><li><code>eplt</code>:    LPT polytropic efficiency</li><li><code>etaf</code>:    fan overall efficiency</li><li><code>etalc</code>:   LPC overall efficiency</li><li><code>etahc</code>:   HPC overall efficiency</li><li><code>etaht</code>:   HPT overall efficiency</li><li><code>etalt</code>:   LPT overall efficiency</li><li><code>Lconv</code>:   <code>true</code> if convergence was successful, <code>false</code> otherwise</li></ul><p>The &quot;?&quot; symbol denotes the station index:</p><ul><li>0: freestream</li><li>18: fan face outside of casing BLs</li><li>19: fan face over LPC portion</li><li>2: fan face over fan portion</li><li>21: fan exit</li><li>25: LPC exit, HPC inlet</li><li>3: compressor exit</li><li>4: combustor exit before cooling air addition</li><li>41: turbine inlet after cooling air addition</li><li>45: HPT exit, LPT inlet</li><li>49: LPT exit</li><li>5: core nozzle</li><li>6: core flow downstream</li><li>7: fan nozzle</li><li>8: fan flow downstream</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfsize.jl#L1-L127">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.tfweight"><a class="docstring-binding" href="#TASOPT.engine.tfweight"><code>TASOPT.engine.tfweight</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">tfweight(ac)</code></pre><p>Engine weight estimation function using Giulia Pantalone, Drela, or Fitzgerald model.</p><details class="admonition is-details" id="Inputs-and-Outputs-a49c895aae66bd26"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-a49c895aae66bd26" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Input:</strong></p><ul><li><code>ac::aircraft</code>: aircraft object</li></ul><p><strong>Output:</strong></p><ul><li><code>Weng</code>: Total engine weight.</li><li><code>Wnac</code>: Nacelle weight. </li><li><code>Webare</code>: Bare engine weight.</li><li><code>Snace1</code>: Nacelle area.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfweight.jl#L1-L15">source</a></section></details></article><h2 id="Turbofan-Maps"><a class="docs-heading-anchor" href="#Turbofan-Maps">Turbofan Maps</a><a id="Turbofan-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-Maps" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TASOPT.engine.Ncmap-NTuple{6, Any}"><a class="docstring-binding" href="#TASOPT.engine.Ncmap-NTuple{6, Any}"><code>TASOPT.engine.Ncmap</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Ncmap(pratio, mb, piD, mbD, NbD, Cmap)</code></pre><p>Calculates compressor or fan corrected speed as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-12a4e7432b50c080"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-12a4e7432b50c080" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>: pressure ratio </li><li><code>mb</code>:       corrected mass flow</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>Cmap(.)</code>:  map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>Nb</code>:     wheel speed</li><li><code>Nb_?</code>:   derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L1-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.ecmap-NTuple{8, Any}"><a class="docstring-binding" href="#TASOPT.engine.ecmap-NTuple{8, Any}"><code>TASOPT.engine.ecmap</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ecmap(pratio, mb, piD, mbD, Cmap, effo, piK, effK)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-3ab8791ee42cc35f"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-3ab8791ee42cc35f" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>Cmap(.)</code>:   map constants</li><li><code>effo</code>:      maximum efficiency</li><li><code>piK</code>:       pi-dependence offset  eff = effo + effK*(pi-piK)</li><li><code>effK</code>:      pi-dependence slope</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L115-L135">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.Ncmap1-NTuple{9, Any}"><a class="docstring-binding" href="#TASOPT.engine.Ncmap1-NTuple{9, Any}"><code>TASOPT.engine.Ncmap1</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Ncmap1(pratio, m, piD, mbD, NbD, ABCDm, iabcd, Tr, pr)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-c084c5fd3f585520"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-c084c5fd3f585520" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>ABCDm</code>:   map constants</li><li><code>iabcd</code>:   map exponents</li><li><code>Tr</code>:      T/Tref</li><li><code>pr</code>:      p/pref</li></ul><p><strong>Outputs:</strong></p><ul><li><code>N</code>:        wheel speed</li><li><code>N_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L203-L224">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.ecmap1-NTuple{9, Any}"><a class="docstring-binding" href="#TASOPT.engine.ecmap1-NTuple{9, Any}"><code>TASOPT.engine.ecmap1</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ecmap1(pratio, m, piD, mbD, ABCDm, iabcd, effo, Tr, pr)</code></pre><p>Calculates compressor or fan efficiency as a function of pressure ratio and mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-5159e5cf45c57240"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-5159e5cf45c57240" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>pratio</code>:        pressure ratio</li><li><code>mb</code>:        corrected mass flow</li><li><code>piD</code>:       design pressure ratio</li><li><code>mbD</code>:       design corrected mass flow</li><li><code>ABCDm</code>:   map constants</li><li><code>iabcd</code>:   map exponents</li><li><code>effo</code>:     maximum efficiency</li><li><code>Tr</code>:      T/Tref</li><li><code>pr</code>:      p/pref</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L271-L292">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.etmap-NTuple{11, Any}"><a class="docstring-binding" href="#TASOPT.engine.etmap-NTuple{11, Any}"><code>TASOPT.engine.etmap</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">etmap(dh, mb, Nb, piD, mbD, NbD, ept0, Tmap, Tt, cpt, Rt)</code></pre><p>Calculates turbine efficiency as a function of work and corrected mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-a6b1c120927eecf9"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-a6b1c120927eecf9" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>dh</code>:        enthalpy change</li><li><code>mb</code>:        corrected mass flow</li><li><code>Nb</code>:        corrected speed</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>ept0</code>:      turbine polytropic efficiency estimate</li><li><code>Tmap(.)</code>:   map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>eff</code>:        efficiency</li><li><code>eff_?</code>:      derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L345-L365">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.Pimap-NTuple{6, Any}"><a class="docstring-binding" href="#TASOPT.engine.Pimap-NTuple{6, Any}"><code>TASOPT.engine.Pimap</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Pimap(mb, Nb, piD, mbD, NbD, Cmap)</code></pre><p>Calculates compressor or fan pressure ratio as a function of pressure ratio and corrected mass flow</p><details class="admonition is-details" id="Inputs-and-Outputs-77833430d56eeb21"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-77833430d56eeb21" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>mb</code>:        corrected mass flow</li><li><code>Nb</code>:        corrected speed</li><li><code>piD</code>:      design pressure ratio</li><li><code>mbD</code>:      design corrected mass flow</li><li><code>NbD</code>:      design corrected speed</li><li><code>Cmap(.)</code>:  map constants</li></ul><p><strong>Outputs:</strong></p><ul><li><code>pratio</code>:      pressure ratio</li><li><code>pi_?</code>:    derivatives</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/tfmap.jl#L415-L433">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.tfoper!"><a class="docstring-binding" href="#TASOPT.engine.tfoper!"><code>TASOPT.engine.tfoper!</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">function tfoper!(gee, M0, T0, p0, a0, Tref, pref,
  Phiinl, Kinl, eng_has_BLI_cores,
  pid, pib, pifn, pitn,
  Gearf,
  pifD, pilcD, pihcD, pihtD, piltD,
  mbfD, mblcD, mbhcD, mbhtD, mbltD,
  NbfD, NblcD, NbhcD, NbhtD, NbltD,
  A2, A25, A5, A7,
  opt_calc_call,
  Ttf, ifuel, etab,
  epf0, eplc0, ephc0, epht0, eplt0,
  mofft, Pofft,
  Tt9, pt9,
  epsl, epsh,
  opt_cooling,
  Mtexit, dTstrk, StA, efilm, tfilm,
  M4a, ruc,
  ncrowx, ncrow,
  epsrow, Tmrow,
  Feng,
  M2, pif, pilc, pihc, mbf, mblc, mbhc, Tt4, pt5, mcore, M25)</code></pre><p>Turbofan operation routine. Calculation procedure follows that of Kerrebrock, but the usual gas property formulas are replaced by function calls, which can therefore implement more general gas models. In addition, a turbine cooling model is added.</p><p>The gas routines are described in <a href="../gascalc/#Gas-Calculations">Gas Calculations</a></p><details class="admonition is-details" id="Inputs-and-Outputs-ed0ca2358174e2e9"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-ed0ca2358174e2e9" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><p><code>gee</code>:     gravity acceleration</p></li><li><p><code>M0</code>:      freestream Mach</p></li><li><p><code>T0</code>:      freestream temperature  [K]</p></li><li><p><code>p0</code>:      freestream pressure  [Pa]</p></li><li><p><code>Tref</code>:    reference temperature for corrected mass flow and speed</p></li><li><p><code>pref</code>:    reference pressure for corrected mass flow</p></li><li><p><code>Phiinl</code>:  inlet ingested dissipation  <code>Phi_inl</code></p></li><li><p><code>eng_has_BLI_cores</code>:</p><ul><li><code>false</code>: core in clear flow</li><li><code>true</code>: core sees <code>Phiinl</code></li></ul></li><li><p><code>pid</code>:     diffuser pressure ratio  ( = <code>pt2/pt0</code>)</p></li><li><p><code>pib</code>:     burner   pressure ratio  ( = <code>pt4/pt3</code>)</p></li><li><p><code>pifn</code>:    fan     nozzle pressure ratio  ( = <code>pt7/pt6.9</code>)</p></li><li><p><code>pitn</code>:    turbine nozzle pressure ratio  ( = <code>pt5/pt4.9</code>)</p></li><li><p><code>Gearf</code>:   fan gear ratio  ( = Nl/Nf )</p></li><li><p><code>pifD</code>:    design fan pressure ratio  ( = <code>pt21/pt2</code>)</p></li><li><p><code>pilcD</code>:   design LPC pressure ratio  ( = <code>pt25/pt19</code>)</p></li><li><p><code>pihcD</code>:   design HPC pressure ratio  ( = <code>pt3/pt25</code>)</p></li><li><p><code>pihtD</code>:   design HPT pressure ratio  ( = <code>pt45/pt41</code>)</p></li><li><p><code>piltD</code>:   design LPT pressure ratio  ( = <code>pt49/pt45</code>)</p></li><li><p><code>mbfD</code>:    design corrected fan mass flow ( = <code>mf*sqrt(Tt2/Tref)/(pt2/pref)</code> ) where <code>mf = mc*BPR</code></p></li><li><p><code>mblcD</code>:   design corrected LPC mass flow ( = <code>mc*sqrt(Tt19/Tref)/(pt19/pref)</code> )</p></li><li><p><code>mbhcD</code>:   design corrected HLC mass flow ( = <code>mc*sqrt(Tt25/Tref)/(pt25/pref)</code> )</p></li><li><p><code>mbhtD</code>:   design corrected HPT mass flow ( = <code>mt*sqrt(Tt41/Tref)/(pt41/pref)</code> ) where <code>mt = mc*(1+ff)</code></p></li><li><p><code>mbltD</code>:   design corrected LPT mass flow ( = <code>mt*sqrt(Tt45/Tref)/(pt45/pref)</code> )</p></li><li><p><code>NbfD</code>:    design corrected fan speed ( = <code>Nf/sqrt(Tt2/Tref)</code> )</p></li><li><p><code>NblcD</code>:   design corrected LPC speed ( = <code>Nl/sqrt(Tt19/Tref)</code> )</p></li><li><p><code>NbhcD</code>:   design corrected HPC speed ( = <code>Nh/sqrt(Tt25/Tref)</code> )</p></li><li><p><code>NbhtD</code>:   design corrected HPT speed ( = <code>Nh/sqrt(Tt41/Tref)</code> )</p></li><li><p><code>NbltD</code>:   design corrected LPT speed ( = <code>Nl/sqrt(Tt45/Tref)</code> )</p></li><li><p><code>A2</code>:      fan-face area [m^2]</p></li><li><p><code>A25</code>:     HPC-face area [m^2]</p></li><li><p><code>A5</code>:      core nozzle area [m^2]</p></li><li><p><code>A7</code>:      fan  nozzle area [m^2]</p></li><li><p><code>opt_calc_call</code>:</p><ul><li><code>&quot;oper_fixedTt4&quot;</code>: <code>Tt4</code> is specified</li><li><code>&quot;oper_fixedFe&quot;</code>: <code>Feng</code> is specified</li></ul></li><li><p><code>Tt4</code>:     turbine-inlet total temperature [K]</p></li><li><p><code>Ttf</code>:     fuel temperature entering combustor</p></li><li><p><code>ifuel</code>:   fuel index, see function <a href="../gascalc/#TASOPT.engine.gasfun"><code>gasfun</code></a></p></li><li><p><code>hvap</code>:    fuel enthalpy of vaporization (J/kg)</p></li><li><p><code>etab</code>:    combustor efficiency (fraction of fuel burned)</p></li><li><p><code>epf0</code>:    max fan polytropic efficiency</p></li><li><p><code>eplc0</code>:   LPC max polytropic efficiency</p></li><li><p><code>ephc0</code>:   HPC max polytropic efficiency</p></li><li><p><code>epht0</code>:   HPT max polytropic efficiency</p></li><li><p><code>eplt0</code>:   LPT max polytropic efficiency</p></li><li><p><code>mofft</code>:    mass flow offtake at LPC discharge station 2.5</p></li><li><p><code>Pofft</code>:    low spool power offtake</p></li><li><p><code>Tt9</code>:     offtake air discharge total temperature</p></li><li><p><code>pt9</code>:     offtake air discharge total pressure</p></li><li><p><code>epsl</code>:    low  spool power loss fraction</p></li><li><p><code>epsh</code>:    high spool power loss fraction</p></li><li><p><code>opt_cooling</code>:   turbine cooling flag</p><ul><li><code>&quot;none&quot;</code>: no cooling, ignore all cooling parameters below</li><li><code>&quot;fixed_coolingflowratio&quot;</code>: usual cooling, using passed-in <code>fcool</code></li><li><code>&quot;fixed_Tmetal&quot;</code>: usual cooling, but set (and return) <code>fcool</code> from <code>Tmetal</code></li></ul></li><li><p><code>Mtexit</code>:   turbine blade-row exit Mach, for setting temperature drops</p></li><li><p><code>Tmetal</code>:   specified metal temperature  [K], used only if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></p></li><li><p><code>dTstrk</code>:   hot-streak temperature delta {K}, used only if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></p></li><li><p><code>StA</code>:      area-weighted Stanton number    , used only if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code></p></li><li><p><code>M4a</code>:      effective Mach at cooling-flow outlet (start of mixing)</p></li><li><p><code>ruc</code>:      cooling-flow outlet velocity ratio, <code>u/ue</code></p></li><li><p><code>ncrowx</code>:      dimension of <code>epsrow</code> array</p></li><li><p><code>ncrow</code>:       number of blade rows requiring cooling</p></li><li><p><code>epsrow(.)</code>: input specified  cooling-flow bypass ratio if <code>opt_cooling=&quot;fixed_coolingflowratio&quot;</code>; output resulting cooling-flow bypass ratio if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code>.</p></li><li><p><code>Tmrow(.)</code>: input specified metal temperature [K] if <code>opt_cooling=&quot;fixed_Tmetal&quot;</code>; output resulting metal temperature [K] if <code>opt_cooling=&quot;fixed_coolingflowratio&quot;</code></p></li></ul><p><strong>Output:</strong></p><ul><li><code>epsrow(.)</code>:   see above</li><li><code>Tmrow(.)</code>:    see above</li><li><code>TSFC</code>:    thrust specific fuel consumption = <code>mdot_fuel g / F</code>   [1/s]</li><li><code>Fsp</code>:     specific thrust  = <code>F / (mdot u0) = F / ((1+BPR) mdot_core u0)</code></li><li><code>hfuel</code>:   fuel heating value   [J / kg K]</li><li><code>ff</code>:      fuel mass flow fraction  =  <code>mdot_fuel / mdot_core</code></li><li><code>Feng</code>:    net effective thrust  = <code>(PK_inl+PK_out-Phi_jet)/u0  =  sum(mdot u)</code></li><li><code>mcore</code>:   core mass flow = <code>mdot_core</code>  [kg/s]</li><li><code>BPR</code>:     bypass ratio   = <code>mdot_fan/mdot_core</code></li><li><code>Tt?</code>:     total temperature</li><li><code>ht?</code>:     total complete enthalpy (includes heat of formation)</li><li><code>pt?</code>:     total pressure</li><li><code>cpt?</code>:    specific heat at stagnation temperature  (= <code>dh/dT</code>)</li><li><code>Rt?</code>:     gas constant  at stagnation conditions</li><li><code>T?</code>:      static temperature</li><li><code>u?</code>:      velocity</li><li><code>etaf</code>:    fan          overall efficiency</li><li><code>etac</code>:    compressor   overall efficiency</li><li><code>etatf</code>:   fan-turbine  overall efficiency</li><li><code>etatc</code>:   comp-turbine overall efficiency</li><li><code>Lconv</code>:   <code>true</code> if convergence was successful, <code>false</code> otherwise</li></ul><p>The &quot;?&quot; symbol denotes the station index:</p><ul><li>0: freestream</li><li>18: fan face outside of casing BLs</li><li>19: fan face over LPC portion</li><li>2: fan face over fan portion</li><li>21: fan exit, precooler inlet</li><li>19c: precooler outlet, LPC inlet</li><li>25: LPC exit, intercooler inlet</li><li>25c: intercooler exit, HPC inlet</li><li>3: compressor exit</li><li>4: combustor exit before cooling air addition</li><li>41: turbine inlet after cooling air addition</li><li>45: HPT exit, LPT inlet</li><li>49: LPT exit, regenerative cooler inlet</li><li>49c: regenerative cooler outlet</li><li>5: core nozzle</li><li>6: core flow downstream</li><li>7: fan nozzle</li><li>8: fan flow downstream</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfoper.jl#L1-L149">source</a></section></details></article><h2 id="Turbofan-Cooling"><a class="docs-heading-anchor" href="#Turbofan-Cooling">Turbofan Cooling</a><a id="Turbofan-Cooling-1"></a><a class="docs-heading-anchor-permalink" href="#Turbofan-Cooling" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="TASOPT.engine.mcool-NTuple{9, Any}"><a class="docstring-binding" href="#TASOPT.engine.mcool-NTuple{9, Any}"><code>TASOPT.engine.mcool</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">mcool(ncrowx, Tmrow, Tt3, Tt4, dTstreak, Trrat, efilm, tfilm, StA)</code></pre><p>Calculates cooling mass flow requirement.</p><details class="admonition is-details" id="Inputs-and-Outputs-72baeac7251224c6"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-72baeac7251224c6" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ncrowx</code>:    dimension of <code>Tmrow(.)</code> and <code>epsrow(.)</code> arrays (max number of blade rows)</li><li><code>Tmrow(.)</code>:  design metal temperature for each blade row</li><li><code>Tt3</code>:       cooling flow temperature</li><li><code>Tt4</code>:       hot gas temperature from burner</li><li><code>dTstreak</code>:  hot-streak temperature increase over Tt4, for first blade row </li><li><code>Trrat</code>:     static temperature ratio across each blade row, T4.1 / T4</li><li><code>efilm</code>:     cooling efficiency = <code>(Tco-Tci)/(Tmetal-Tci)</code></li><li><code>tfilm</code>:     film effectiveness = <code>(Tgas-Tfaw)/(Tgas-Tco)</code> where<ul><li><code>Tco</code> = temperature of cooling air exiting  blade</li><li><code>Tci</code> = temperature of cooling air entering blade</li><li><code>Tfaw</code> = film adiabatic wall temperature (for insulated-wall case)</li></ul></li><li>StA<code>:        area-weighted external Stanton number =</code>St (Asurf/Aflow) cpgas/cpcool`</li></ul><p><strong>Output:</strong></p><ul><li><code>ncrow</code>:      number of blade rows which need cooling</li><li><code>epsrow(.)</code>:  cooling mass flow ratio for each blade row, <code>m_c_row/m_air</code></li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfcool.jl#L2-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.Tmcalc-NTuple{10, Any}"><a class="docstring-binding" href="#TASOPT.engine.Tmcalc-NTuple{10, Any}"><code>TASOPT.engine.Tmcalc</code></a> ‚Äî <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Tmcalc(ncrowx, ncrow, Tt3, Tt4, dTstreak, Trrat, efilm, tfilm, StA, epsrow)</code></pre><p>Calculates metal temperature for blade row</p><details class="admonition is-details" id="Inputs-and-Outputs-cb92c8ad2e2a27dc"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-cb92c8ad2e2a27dc" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ncrowx</code>:    dimension of Tmrow(.),epsrow(.) arrays (max number of blade rows)</li><li><code>ncrow</code>:     number of blade rows which are cooled</li><li><code>epsrow(.)</code>:  cooling mass flow ratio for each blade row, m<em>c</em>row/m_air</li><li><code>Tt3</code>:       cooling flow temperature</li><li><code>Tt4</code>:       hot gas temperature from burner</li><li><code>dTstreak</code>:  hot-streak temperature increase over Tt4, for first blade row </li><li><code>Trrat</code>:     static temperature ratio across each blade row, T4.1 / T4</li><li><code>efilm</code>:     cooling efficiency = (Tco-Tci)/(Tmetal-Tci)</li><li><code>tfilm</code>:     film effectiveness = (Tgas-Tfaw)/(Tgas-Tco)              Tco = temperature of cooling air exiting  blade              Tci = temperature of cooling air entering blade              Tfaw = film adiabatic wall temperature (for insulated-wall case)</li><li><code>StA</code>:       area-weighted external Stanton number = St (Asurf/Aflow) cpgas/cpcool<strong>Output:</strong></li><li><code>Tmrow(.)</code>:  design metal temperature for each blade row</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbofan/tfcool.jl#L87-L110">source</a></section></details></article><h2 id="Turbomachinery-Components"><a class="docs-heading-anchor" href="#Turbomachinery-Components">Turbomachinery Components</a><a id="Turbomachinery-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Turbomachinery-Components" title="Permalink"></a></h2><p>The compressor off-design performance is determined by interpolation to the compressor maps in pyCycle<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1" class="footnote-ref">[1]</a><span class="footnote-preview" id="fn-1"></span></sup>. The compressor parameters are scaled to the design pressure ratios, speeds, and mass flow rates in the pyCycle maps by using</p><p class="math-container">\[    \tilde{p} = \frac{\pi -1}{\pi_D -1}\]</p><p class="math-container">\[    \tilde{m} = \frac{\bar{m}}{\bar{m}_D}\]</p><p class="math-container">\[    \tilde{N} = \frac{\bar{N}}{\bar{N}_D},\]</p><p>where <span>$\pi$</span> represents the pressure ratio, <span>$\bar{m}$</span> is the corrected mass flow rate, <span>$\bar{N}$</span> is the corrected speed, and the subscript <span>$D$</span> denotes the design values. For a given set of compressor parameters, the normalized parameters <span>$\tilde{p}$</span>, <span>$\tilde{m}$</span>, and <span>$\tilde{N}$</span> are used to calculate the dimensional values in the pyCycle map space. </p><p>The pyCycle maps contain data for pressure ratio, corrected mass flow rate, and isentropic efficiency as a function of corrected speed and R-line parameter. However, the turbofan operation function, <a href="#TASOPT.engine.tfoper!"><code>tfoper!()</code></a>, is set up so that the polytropic efficiency and corrected speed is calculated from the pressure ratio and corrected mass flow rate. Therefore, a reverse interpolation problem is required to compute these parameters. For this, the compressor maps are extrapolated and a standard non-linear solver is used in <a href="#TASOPT.engine.find_NR_inverse_with_derivatives"><code>find_NR_inverse_with_derivatives()</code></a> to calculate the corrected speed and R-line parameter that correspond to given corrected mass flow rate and pressure ratio. The extrapolated pressure ratio and polytropic efficiency maps are shown below. These parameters are then translated to the scaled map by using <span>$\tilde{p}$</span>, <span>$\tilde{m}$</span>, and <span>$\tilde{N}$</span> in <a href="#TASOPT.engine.calculate_compressor_speed_and_efficiency"><code>calculate_compressor_speed_and_efficiency()</code></a>, which also returns the polytropic efficiency and derivatives.</p><p><img src="../../assets/extrapolated_PR_maps.svg" alt="PEMfig"/> <img src="../../assets/extrapolated_eff_maps.svg" alt="PEMfig"/></p><article><details class="docstring" open="true"><summary id="TASOPT.engine.calculate_compressor_speed_and_efficiency"><a class="docstring-binding" href="#TASOPT.engine.calculate_compressor_speed_and_efficiency"><code>TASOPT.engine.calculate_compressor_speed_and_efficiency</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">calculate_compressor_speed_and_efficiency(map, pratio, mb, piD, mbD, NbD, epol0; Ng=0.5, Rg=2.0)</code></pre><p>Calculates corrected speed and polytropic efficiency for a compressor, along with derivatives to pressure ratio and mass flow.</p><details class="admonition is-details" id="Inputs-and-Outputs-bfd6792bc3dc017c"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-bfd6792bc3dc017c" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>map::CompressorMap</code>: structure containing the compressor map and interpolations.</li><li><code>pratio::Float64</code>: compressor pressure ratio.</li><li><code>mb::Float64</code>: current mass flow rate.</li><li><code>piD::Float64</code>: design pressure ratio.</li><li><code>mbD::Float64</code>: design mass flow rate.</li><li><code>NbD::Float64</code>: design rotational speed.</li><li><code>epol0::Float64</code>: maximum polytropic efficiency.</li><li><code>Ng::Float64</code>: initial guess for normalized speed (optional).</li><li><code>Rg::Float64</code>: initial guess for R-line (optional).</li></ul><p><strong>Outputs:</strong></p><ul><li><code>Nb::Float64</code>: corrected compressor speed.</li><li><code>epol::Float64</code>: polytropic efficiency.</li><li><code>dNb_dpi::Float64</code>: derivative of corrected speed w.r.t. <code>piD</code>.</li><li><code>dNb_dmb::Float64</code>: derivative of corrected speed w.r.t. <code>mb</code>.</li><li><code>depol_dpi::Float64</code>: derivative of efficiency w.r.t. <code>piD</code>.</li><li><code>depol_dmb::Float64</code>: derivative of efficiency w.r.t. <code>mb</code>.</li><li><code>N::Float64</code>: matched normalized speed.</li><li><code>R::Float64</code>: matched R-line.</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/map_functions.jl#L150-L176">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.find_NR_inverse_with_derivatives"><a class="docstring-binding" href="#TASOPT.engine.find_NR_inverse_with_derivatives"><code>TASOPT.engine.find_NR_inverse_with_derivatives</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">find_NR_inverse_with_derivatives(itp_Wc, itp_PR, Wc_target, PR_target; Ng=0.5, Rg=2.0)</code></pre><p>Finds the normalized speed <code>N</code> and R-line <code>R</code> corresponding to a target corrected mass flow <code>Wc_target</code> and pressure ratio <code>PR_target</code>, using a nonlinear solver with Jacobian information from interpolation gradients.</p><details class="admonition is-details" id="Inputs-and-Outputs-ae86c745b40be413"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-ae86c745b40be413" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>itp_Wc::GriddedInterpolation</code>: interpolation of corrected mass flow over (N, R).</li><li><code>itp_PR::GriddedInterpolation</code>: interpolation of pressure ratio over (N, R).</li><li><code>Wc_target::Float64</code>: target corrected mass flow.</li><li><code>PR_target::Float64</code>: target pressure ratio.</li><li><code>Ng::Float64</code>: initial guess for normalized speed (optional).</li><li><code>Rg::Float64</code>: initial guess for R-line (optional).</li></ul><p><strong>Outputs:</strong></p><ul><li><code>N::Float64</code>: normalized speed at the matched point.</li><li><code>R::Float64</code>: R-line value at the matched point.</li><li><code>dN_dw::Float64</code>: ‚àÇN/‚àÇWc</li><li><code>dN_dpr::Float64</code>: ‚àÇN/‚àÇPR</li><li><code>dR_dw::Float64</code>: ‚àÇR/‚àÇWc</li><li><code>dR_dpr::Float64</code>: ‚àÇR/‚àÇPR</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/turbomachinery/map_functions.jl#L77-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.constant_TSFC_engine!"><a class="docstring-binding" href="#TASOPT.engine.constant_TSFC_engine!"><code>TASOPT.engine.constant_TSFC_engine!</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">constant_TSFC_engine!(ac, d1, imission::Int64, ip::Int64, d2, d3)</code></pre><p>A very simple model of an aircraft engine consuming some fuel. The fuel flow is determined by the thrust required  by the aircraft. The thrust is calculated based on the climb rate of the aircraft. The fuel flow is calculated using  the thrust specific fuel consumption (TSFC) of the engine, which is an input.</p><details class="admonition is-details" id="Inputs-and-Outputs-7dda3a6816d24c84"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-7dda3a6816d24c84" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Input:</strong></p><ul><li><code>ac::aircraft</code>: aircraft object</li><li><code>imission::Int64</code>: mission index</li><li><code>ip::Int64</code>: mission point index</li><li><code>d</code>s: dummy variables used for compatibility with other sizing functions</li></ul><p><strong>Output:</strong> No direct outputs. The <code>ac</code> object gets modified with the engine parameters.</p></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/simple_engine/constant_TSFC_engine.jl#L1-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.calculate_thrust_from_ROC!"><a class="docstring-binding" href="#TASOPT.engine.calculate_thrust_from_ROC!"><code>TASOPT.engine.calculate_thrust_from_ROC!</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">calculate_thrust_from_ROC!(ac, ip, imission)</code></pre><p>A model to estimate the required thrust based on the rate of climb and lift and drag conditions.</p><details class="admonition is-details" id="Inputs-and-Outputs-a9e05196f71a2f34"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-a9e05196f71a2f34" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>ac::aircraft</code>: aircraft object</li><li><code>ip::Int64</code>: mission point index</li><li><code>imission::Int64</code>: mission index</li></ul><p><strong>Outputs:</strong> No outputs. The <code>ac</code> object gets modified with the thrust Fe.</p></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/b56807cac3d61c35a3f817be9679102ee4202cf2/src/engine/thrust_from_ROC.jl#L1-L14">source</a></section></details></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>https://github.com/OpenMDAO/pyCycle</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../structures/cabin_sizing/">¬´ Cabin sizing</a><a class="docs-footer-nextpage" href="../gascalc/">Gas Calculations ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 30 January 2026 15:52">Friday 30 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>PEM fuel cells ¬∑ TASOPT.jl</title><meta name="title" content="PEM fuel cells ¬∑ TASOPT.jl"/><meta property="og:title" content="PEM fuel cells ¬∑ TASOPT.jl"/><meta property="twitter:title" content="PEM fuel cells ¬∑ TASOPT.jl"/><meta name="description" content="Documentation for TASOPT.jl."/><meta property="og:description" content="Documentation for TASOPT.jl."/><meta property="twitter:description" content="Documentation for TASOPT.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TASOPT.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/loadingrunning/">Loading and running</a></li><li><a class="tocitem" href="../../examples/payload_range/">Payload-range diagram</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/NM_optimization/">Nelder Mead</a></li><li><a class="tocitem" href="../../examples/gradient_based_optimization/">Gradient Based Optimization</a></li></ul></li><li><a class="tocitem" href="../../examples/sensitivity/">Sensitivities</a></li></ul></li><li><span class="tocitem">Aerodynamics</span><ul><li><a class="tocitem" href="../../aero/aerosummary/">Summary and outputs</a></li><li><a class="tocitem" href="../../aero/geometry/">Geometry</a></li><li><a class="tocitem" href="../../aero/lift/">Lift</a></li><li><a class="tocitem" href="../../aero/drag/">Drag</a></li><li><a class="tocitem" href="../../aero/moment/">Pitching moment</a></li><li><a class="tocitem" href="../../atmos/atmos/">Atmospheric properties</a></li></ul></li><li><span class="tocitem">Structures</span><ul><li><a class="tocitem" href="../../structures/wing/">Wings and tails</a></li><li><a class="tocitem" href="../../structures/fuselage/">Fuselage</a></li><li><a class="tocitem" href="../../structures/landing_gear/">Landing gear</a></li><li><a class="tocitem" href="../../structures/cabin_sizing/">Cabin sizing</a></li></ul></li><li><span class="tocitem">Propulsion systems</span><ul><li><a class="tocitem" href="../propsys/">Propulsion system</a></li><li><a class="tocitem" href="../gascalc/">Gas Calculations</a></li><li><a class="tocitem" href="../hxfun/">Heat exchangers</a></li><li class="is-active"><a class="tocitem" href>PEM fuel cells</a><ul class="internal"><li><a class="tocitem" href="#Theory"><span>Theory</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li><li><a class="tocitem" href="../ElectricMachines/">Electric Machines</a></li></ul></li><li><span class="tocitem">Cryogenic tanks</span><ul><li><a class="tocitem" href="../../cryo_tank/fueltanks/">Thermal and structural models</a></li><li><a class="tocitem" href="../../cryo_tank/cryotank/">Homogeneous model</a></li></ul></li><li><a class="tocitem" href="../../balance/balance/">Stability</a></li><li><span class="tocitem">Mission and sizing</span><ul><li><a class="tocitem" href="../../sizing/sizing/">Design and evaluation</a></li><li><a class="tocitem" href="../../sizing/weightmodels/">TASOPT Weight Model</a></li></ul></li><li><span class="tocitem">Data and I/O</span><ul><li><a class="tocitem" href="../../data_io/data_basics/">Data structure basics</a></li><li><a class="tocitem" href="../../data_io/structs/">Data structure details</a></li><li><a class="tocitem" href="../../data_io/data_io/">Loading and saving models</a></li></ul></li><li><span class="tocitem">Miscellaneous</span><ul><li><a class="tocitem" href="../../misc/dreladocs/">Original Drela docs</a></li><li><a class="tocitem" href="../../misc/fordevs/">Notes for devs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Propulsion systems</a></li><li class="is-active"><a href>PEM fuel cells</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>PEM fuel cells</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MIT-LAE/TASOPT.jl/blob/main/docs/src/propulsion/PEMfuelcell.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="fuelcells"><a class="docs-heading-anchor" href="#fuelcells">PEM fuel cells</a><a id="fuelcells-1"></a><a class="docs-heading-anchor-permalink" href="#fuelcells" title="Permalink"></a></h1><p>To study novel aircraft designs that may leverage cryogenic hydrogen, the following fuel cell models were integrated, along with <a href="../../cryo_tank/fueltanks/#fueltanks">cryogenic tank</a> and <a href="../hxfun/#hxers">heat exchanger</a> models.</p><h2 id="Theory"><a class="docs-heading-anchor" href="#Theory">Theory</a><a id="Theory-1"></a><a class="docs-heading-anchor-permalink" href="#Theory" title="Permalink"></a></h2><details class="admonition is-details" id="Theory-Proton-exchange-membrane-fuel-cells-d43484699861f62b"><summary class="admonition-header">üìñ Theory - Proton-exchange membrane fuel cells<a class="admonition-anchor" href="#Theory-Proton-exchange-membrane-fuel-cells-d43484699861f62b" title="Permalink"></a></summary><div class="admonition-body"><p>Proton-exchange membrane (PEM), also known as polymer electrolyte membrane, fuel cells are electrochemical devices that convert the chemical energy of a fuel to electrical energy through low-temperature oxidation and reduction reactions. Unlike a combustion process in which these processes occur through direct collisions between molecules, the oxidation and reduction reactions are physically separated in fuel cells by a membrane, across which ions produced in the oxidation reaction drift to complete the overall chemical reaction. A diagram of a hydrogen-air fuel cell is shown below. The overall reaction is </p><p class="math-container">\[\mathrm{H}_2 + \frac{1}{2}\mathrm{O}_2 \rightarrow \mathrm{H}_2\mathrm{O},\]</p><p>and this occurs through two half reactions: an oxidation reaction</p><p class="math-container">\[\mathrm{H}_2 \rightarrow 2\mathrm{H}^+ + 2e^-,\]</p><p>and a reduction reaction</p><p class="math-container">\[\frac{1}{2}\mathrm{O}_2+2\mathrm{H}^+ + 2e^- \rightarrow \mathrm{H}_2\mathrm{O},\]</p><p>where <span>$e^-$</span> represents a free electron. In a PEM fuel cell, the oxidation reaction occurs at the anode, with protons drifting across the electrolyte membrane towards the cathode where reduction occurs, while electrons complete an external electric circuit. There are three regions of physical interest in a fuel cell: a bulk flow region, a diffusion layer, and an electrolyte layer. The bulk flow refers to the region outside of the electrodes, which is dominated by advection. The diffusion region is the region inside the porous electrodes, where there cannot be significant advection and molecular motion is governed by diffusion. The electrolyte is the region between the electrodes, where ions drift to close the circuit.</p><p><img src="../../assets/PEMfuelcell.svg" alt="PEMfig"/></p><p>The voltage across a fuel cell is governed by thermodynamics and different loss types<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1" class="footnote-ref">[1]</a><span class="footnote-preview" id="fn-1"></span></sup></p><p class="math-container">\[V = E_r - \eta_\mathrm{ohm} - \eta_C - \eta_A,\]</p><p>where <span>$E_r$</span> is the thermodynamic reversible voltage, <span>$\eta_\mathrm{ohm}$</span> is the ohmic overvoltage due to Joule heating, and <span>$\eta_A$</span> and <span>$\eta_C$</span> are the anode and cathode overvoltages due to activation and concentration losses. The following model is adapted from that in Springer et al.<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>; two versions of this have been implemented: a low-temperature PEMFC model that closely follows the original one in Springer et al.<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>, and a high-temperature PEMFC model that is based on it but makes modifications to reflect the different operating temperatures and membrane properties.</p><h2>Reversible voltage</h2><p>The maximum theoretical energy that can be converted to electrical energy is given by the change in Gibbs free+- energy (<span>$\Delta G$</span>) in this process. Every mole of hydrogen produces <span>$nF$</span> moles of electrons, where <span>$F$</span> is the Faraday constant and <span>$n=2$</span> is the number of electrons produced for each unit of hydrogen. Therefore, the voltage produced in this reversible reaction is given by</p><p class="math-container">\[E_r = \frac{\Delta \hat{g}}{nF},\]</p><p>where <span>$\Delta \hat{g}$</span> is the molar specific change in Gibbs free energy. In general, <span>$\Delta \hat{g}$</span> is a function of temperature as well as of reactant pressure. The reversible voltage of a fuel cell can be calculated using the Nernst equation to account for these effects<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1" class="footnote-ref">[1]</a><span class="footnote-preview" id="fn-1"></span></sup>,</p><p class="math-container">\[E_r = E_0 + \frac{\Delta \hat{s}}{nF}(T-T_0) - \frac{RT}{nF}\ln\left(\frac{p_0^{3/2}}{p_{\mathrm{H}_2} p_{\mathrm{O}_2}^{1/2}}\right),\]</p><p>where <span>$T$</span> is the fuel cell temperature, <span>$p_0=1\,$</span>atm, <span>$T_0=298.15\,$</span>K, and <span>$p_{\mathrm{H}_2}$</span> and <span>$p_{\mathrm{O}_2}$</span> denote the partial pressures of oxygen and hydrogen in the reactants. The term <span>$E_0$</span> is the reversible voltage at standard conditions, and it is equal to <span>$E_0=1.229\,$</span>V for liquid water as a product and <span>$E_0=1.185\,$</span>V for gaseous water. Similarly, the term <span>$\Delta \hat{s}$</span> denotes the molar specific entropy change during the reaction, and it is <span>$\Delta \hat{s}=-44.34\,$</span>J/(mol K) for gaseous water as a product and <span>$\Delta \hat{s}=-163.23\,$</span>J/(mol K) for liquid water.</p><h2>Ohmic losses</h2><p>As ions drift through the electrolyte material, they produce ohmic heating as a result of the electrical resistance of the electrolyte. The area-specific resistance (ASR) of the electrolyte can be calculated as</p><p class="math-container">\[\mathrm{ASR} = \int_0^{t_M} \frac{dz}{\sigma(z)},\]</p><p>where <span>$t_M$</span> is the electrolyte thickness, <span>$\sigma$</span> is the conductivity of the electrolyte material to ionic motion, and <span>$z$</span> is a coordinate normal to the electrolyte surface from the anode to the cathode. As the ASR increases with electrolyte thickness, thin electrolytes are preferred. The conductivity depends on the choice of material. </p><p>A common electrolyte in low-temperature PEM fuel cells is Nafion, which shows excellent ion conduction properties but needs to be constantly hydrated. The conduction properties of Nafion depend on its water content, <span>$\lambda$</span>, defined as the ratio of water molecules to ion conduction sites. An empirical expression for the conductivity of Nafion (in (<span>$\Omega$</span> cm)<span>$^{-1}$</span>) as a function of  <span>$\lambda$</span> and temperature is<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup></p><p class="math-container">\[\sigma = \exp\left[1268\left(\frac{1}{303}-\frac{1}{T}\right)\right](0.005139\lambda-0.00326).\]</p><p>A key challenge in modeling the ohmic losses is to identify how <span>$\lambda$</span> changes depending on the operating parameters. It can be shown that the change in <span>$\lambda$</span> in the direction normal to the electrolyte surface is governed by<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup> </p><p class="math-container">\[\frac{d\lambda}{dz} = \left(n^\mathrm{SAT}_\mathrm{drag}\frac{\lambda}{11}-\alpha^*\right)\frac{jM_m}{2F\rho_\mathrm{dry}D_\lambda},\]</p><p>where <span>$\alpha^*$</span> is defined as the ratio of water molecule flux to proton flux (in general an unknown), <span>$n^\mathrm{SAT}_\mathrm{drag}\approx 2.5$</span> is the number of water molecules dragged by each proton in fully hydrated Nafion,  <span>$\rho_\mathrm{dry}=1970\,$</span>kg m<span>$^{-3}$</span> is the density of dry Nafion, <span>$M_m\approx 1$</span>kg mol<span>$^{-1}$</span> is the Nafion equivalent weight, <span>$j$</span> is the current density that the fuel cell is operating at, and <span>$D_\lambda$</span> is the diffusivity of water in the Nafion membrane. The parameter <span>$D_\lambda$</span> is a weak function of <span>$\lambda$</span><sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>. </p><p>Water content in the electrode/Nafion interface changes as a function of water activity in the electrode, defined as <span>$a_w=\frac{x_{\mathrm{H_2O}}p}{p_\mathrm{SAT}}$</span>, where <span>$x_{\mathrm{H_2O}}$</span> is the water concentration outside the membrane and <span>$p_\mathrm{SAT}$</span> is the saturation partial pressure of water at the fuel cell temperature. If <span>$a_w\leq 1$</span>, expected at the anode side, the relationship can be expressed with a polynomial from a data fit<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>,</p><p class="math-container">\[\lambda = 0.043 + 17.81 a_w - 39.85 a_w^2 + 36 a_w^3,\]</p><p>and for <span>$a_w&gt;1$</span>, expected at the cathode, the relationship is linear but with a different slope<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>,</p><p class="math-container">\[\lambda = 14 +1.4 (a_w-1).\]</p><p>As the reaction proceeds, oxygen and hydrogen are consumed and this affects the concentration in the bulk flow. This effect can be captured with a stoichiometric ratio of hydrogen at the anode and another one for oxygen at the cathode, <span>$\lambda_{\mathrm{H}_2}$</span> an <span>$\lambda_{\mathrm{O}_2}$</span>; for example, if <span>$\lambda_{\mathrm{O}_2}=1$</span>, all the oxygen is consumed in the reaction. </p><p>To use these relationships, it is necessary to calculate the water and reactant concentrations at the membrane/electrode interface. To do so, it is necessary to first determine the water and hydrogen concentration at station 1 and the water and oxygen concentrations at 3, from a mass balance considering depletion effects. Explicit equations for these concentrations as a function of <span>$\alpha^*$</span> and the stoichiometry ratios are given in <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>. Once these are known, the concentrations at 2 and 3 can be determined from the diffusion of the species (see note below).</p><p>The key step in this model is to calculate <span>$\alpha^*$</span> by matching the water concentration (or water content) at the cathode/membrane interface produced by two methods. If the water concentration is solved by integrating the diffusion equation from the cathode side, a water content at the interface <span>$\lambda^\prime_3$</span> can be calculated from the water activity. Similarly, the water activity at 3 can be calculated by first integrating the diffusion equation from the anode side to find the water concentration at 2, then calculating the water content at 2 from the activity, and then integrating the equation above for <span>$\frac{d\lambda}{dz}$</span> across the membrane to find the water content at 3, <span>$\lambda_3$</span>. The correct <span>$\alpha^*$</span> has been found if <span>$\lambda^\prime_3 -\lambda_3$</span>. A root finding algorithm is used in the code to find the <span>$\alpha^*$</span> that fulfills this condition.</p><p>Once <span>$\alpha^*$</span> has been determined, it can be used to find the water content profile across the membrane by solving the ODE for <span>$\lambda$</span> (done numerically in the code). Finally, the conductivity can be calculated from the expression above and this can be used to determine ASR.</p><p>In contrast, polybenzimidazole (PBI) membranes are commonly used in high-temperature PEMFCs. Unlike Nafion, they do not require to be hydrated and they have a negligible water flux across them. A model for how the conductivity of PBI changes with operating conditions is provided in Jio and Li<sup class="footnote-reference"><a id="citeref-3" href="#footnote-3" class="footnote-ref">[3]</a><span class="footnote-preview" id="fn-3"></span></sup>,</p><p class="math-container">\[\sigma = \frac{(168\mathrm{DL}^3 - 6324 \mathrm{DL}^2 + 65760 \mathrm{DL} + 8460) b }{T} \exp\left(-\frac{-619.6\mathrm{DL} + 21650}{RT}\right),\]</p><p>where <span>$\mathrm{DL}$</span> is the phosphoric acid doping level, defined as the ratio of phosphoric acid molecules to number of PBI repeat unit (typically of the order of 5), and b is given by</p><p class="math-container">\[b = \begin{cases}
1+(0.01704T - 4.767)\mathrm{RH}_{avg} &amp; \text{for }  373.15\leq T\leq 413.15\\
1+(0.1432T - 56.89)\mathrm{RH}_{avg} &amp; \text{for } 413.15 &lt; T\leq 453.15\\
1+(0.7T - 309.2)\mathrm{RH}_{avg} &amp; \text{for } 453.15 &lt; T\leq 473.15
\end{cases}\]</p><p>where <span>$\mathrm{RH}_{avg}$</span> is the average of the relative humidity in stations 2 and 3, and the relative humidity is simply <span>$\mathrm{RH}=\frac{x_{\mathrm{H_2O}}p}{p_\mathrm{SAT}}$</span>. To use this expression, it is necessary to calculate the water concentration is stations 2 and 3. As in the low-temperature model, this is done by solving the diffusion equations in Springer et al.<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup> analytically, with the key difference that there is no water flux across the membrane.</p><p>The ohmic overvoltage, or ohmic loss, is given by</p><p class="math-container">\[\eta_\mathrm{ohm} = j \mathrm{ASR}.\]</p><h3>Water saturation</h3><p>There are many models for the saturation partial pressure of water. A possible model valid under 383.15 K is <sup class="footnote-reference"><a id="citeref-4" href="#footnote-4" class="footnote-ref">[4]</a><span class="footnote-preview" id="fn-4"></span></sup></p><p class="math-container">\[p_\mathrm{SAT} = \frac{\exp\left(34.494 - \frac{4924.99}{t + 237.1}\right)}{(t + 105)^{1.57}} ,\]</p><p>where <span>$t$</span> is the temperature in degrees Celsius and <span>$p_\mathrm{SAT}$</span> is in pascals. A model for temperatures between 383.15 and 483 K is<sup class="footnote-reference"><a id="citeref-3" href="#footnote-3" class="footnote-ref">[3]</a><span class="footnote-preview" id="fn-3"></span></sup></p><p class="math-container">\[p_\mathrm{SAT} = 0.68737  T^3 - 732.39  T^2 +263390  T -31919000 ,\]</p><p>where <span>$T$</span> is in kelvin.</p><h3>Diffusivity</h3><p>The diffusion of a species in a multi-species gas is complex. The Stefan-Maxwell expression can be used to model the derivative in space of the concentration of species <span>$i$</span>,</p><p class="math-container">\[\frac{dx_i}{dz}= RT \sum_j \frac{x_i N_j - x_j N_i}{p D_{ij}},\]</p><p>where the sum is made over all the species that <span>$i$</span> can collide with, and <span>$N$</span> represents the molar flux. Equations for the spatial derivative of concentration can be found in <sup class="footnote-reference"><a id="citeref-2" href="#footnote-2" class="footnote-ref">[2]</a><span class="footnote-preview" id="fn-2"></span></sup>; for this particular model, there are closed-form solutions.</p><p>This equation requires determining the binary diffusivities of all the species involved. A model for binary diffusivity of species <span>$i$</span> and <span>$j$</span> is</p><p class="math-container">\[p D_{i,j} = a \left(\frac{T}{\sqrt{T_{ci} T_{cj}}}\right)^b (p_{ci} p_{cj})^{1/3} (T_{ci} T_{cj})^{5/12}\left(\frac{1}{M_i} + \frac{1}{M_j}\right)^{1/2},\]</p><p>where the pressures are in atm and the diffusivity is in cm<span>$^2$</span>/s. For gas pairs involving nonpolar gases, <span>$a=2.745\times10^{-4}$</span> and <span>$b=1.823$</span>. For pairs involving water and another nonpolar gas, <span>$a=3.640\times10^{-4}$</span> and <span>$b=2.334$</span>. The parameters <span>$T_c$</span> and <span>$p_c$</span> can be found in Table 5.1 in <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1" class="footnote-ref">[1]</a><span class="footnote-preview" id="fn-1"></span></sup>.</p><p>When diffusion is occurring inside a porous material, such as a PEM electrode, the material structure affects the diffusion properties. This can be captured via an effective diffusivity, <span>$D^\mathrm{eff}$</span>, which is given by</p><p class="math-container">\[D^\mathrm{eff} = D \varepsilon ^\tau,\]</p><p>where <span>$\varepsilon$</span> is the porosity of the material (a typical value is 0.4), and <span>$\tau$</span> is the tortuosity, which can vary between 1.5 and 10.</p><h2>Cathode overvoltage</h2><p>The fuel cell also experiences voltage drop due to activation losses, since a voltage is required to provide activation energy for the half reactions, and due to concentration losses, as the maximum current is limited by the rate of diffusion from the bulk flow to the electrodes. These losses are most significant at the cathode side; in this model, anode voltage drops are ignored. The cathode overvoltage can be calculated using the Tafel equation,</p><p class="math-container">\[\eta_C = \frac{RT}{n_C \alpha F} \ln \left[\frac{j}{j_0 \frac{p_C}{p_0} x_{\mathrm{O}_2,3eff}}\right],\]</p><p>where <span>$n_C=4$</span> is the number of electrons exchanged in the reduction reaction and <span>$\alpha$</span> represents a symmetry parameter, typically 0.3‚Äì0.5. The effective oxygen concentration at 3, <span>$x_{\mathrm{O}_2,3eff}$</span>, accounts for the fact that part of the water on the cathode side is actually in liquid phase in low-temperature PEMFCs. For these, it is given by</p><p class="math-container">\[x_{\mathrm{O}_2,3eff} = \frac{x_{\mathrm{O}_2,3}}{1-x_{liq}},\]</p><p>where <span>$x_{liq} = x_{\mathrm{H_2O},3} - p_\mathrm{SAT} / p_C$</span> is the fraction of water in the cathode that is in liquid phase. In high-temperature PEMFCs, all water is in gaseous phase, so <span>$x_{\mathrm{O}_2,3eff} =x_{\mathrm{O}_2,3}$</span>.</p><p>The exchange current density, <span>$j_0$</span>, is related to the catalyst properties and effective surface area. A model for it is<sup class="footnote-reference"><a id="citeref-5" href="#footnote-5" class="footnote-ref">[5]</a><span class="footnote-preview" id="fn-5"></span></sup></p><p class="math-container">\[j_0 = j_{0,ref}\frac{A_{eff}}{A}\left(\frac{x_{\mathrm{O}_2,3eff}p_C}{p_0}\right)^\gamma \exp\left[-\frac{E_a}{RT}\left(1-\frac{T}{T_0}\right)\right],\]</p><p>where <span>$j_{0,ref}\sim 10^{-9}$</span> A/m<span>$^2$</span> is the reference exchange current density for a platinum catalyst at <span>$T_0$</span> and <span>$p_0$</span>, <span>$\frac{A_{eff}}{A}$</span> is the ratio of effective surface area of the catalyst to geometric area (can be of the order of 1000), <span>$\gamma$</span> is a parameter in the range of 0.5‚Äì1.0, and <span>$E_a=66$</span> kJ/mol is the activation energy for oxygen reduction on platinum.</p></div></details><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><h3 id="Low-temperature-PEM-model"><a class="docs-heading-anchor" href="#Low-temperature-PEM-model">Low-temperature PEM model</a><a id="Low-temperature-PEM-model-1"></a><a class="docs-heading-anchor-permalink" href="#Low-temperature-PEM-model" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="TASOPT.engine.LT_PEMFC_voltage"><a class="docstring-binding" href="#TASOPT.engine.LT_PEMFC_voltage"><code>TASOPT.engine.LT_PEMFC_voltage</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">LT_PEMFC_voltage(u, Œ±_guess::Float64 = 0.25)</code></pre><p>A 1-D model of the voltage across a low-temperature PEM fuel cell with a Nafion membrane, based on the model in Springer et al. (1991), which captures the effect of reactant depletion, multispecies diffusion and water transport in the membrane.</p><details class="admonition is-details" id="Inputs-and-Outputs-301277b965521ee2"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-301277b965521ee2" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs</li><li><code>Œ±_guess::Float64</code>: guess for ratio of water flux to proton flux; default is 0.25</li></ul><p><strong>Outputs:</strong></p><ul><li><code>V::Float64</code>: voltage across cell (V)</li><li><code>Œ±_star::Float64</code>: ratio of water flux to proton flux</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L271-L286">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.water_balance"><a class="docstring-binding" href="#TASOPT.engine.water_balance"><code>TASOPT.engine.water_balance</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">water_balance(Œ±_star, u, p)</code></pre><p>This function calculates the difference between the water content at 3 from integration from the anode or cathode sides. This residual should be 0 if Œ±_star is the correct one.</p><details class="admonition is-details" id="Inputs-and-Outputs-578a5cc79d770feb"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-578a5cc79d770feb" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>Œ±_star::Float64</code>: ratio of water flux to proton flux</li><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs </li><li><code>p::Struct</code>: structure of type <code>PEMFC_params</code> with parameters </li></ul><p><strong>Outputs:</strong></p><ul><li><code>x_end::Vector{Float64}</code>: vector with values of x at z = d</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L889-L902">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.Nafion_diffusion"><a class="docstring-binding" href="#TASOPT.engine.Nafion_diffusion"><code>TASOPT.engine.Nafion_diffusion</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Nafion_diffusion(T, Œª)</code></pre><p>This function estimates the diffusion coefficient of water in Nafion.</p><details class="admonition is-details" id="Inputs-and-Outputs-103568ad1b0bf33e"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-103568ad1b0bf33e" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: fuel cell temperature (K)</li><li><code>Œª::Float64</code>: water content; ratio of water molecules to SO3- sites</li></ul><p><strong>Outputs:</strong></p><ul><li><code>D_Œª::Float64</code>: water diffusion coefficient in Nafion (m^2/s)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L698-L710">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.conductivity_Nafion"><a class="docstring-binding" href="#TASOPT.engine.conductivity_Nafion"><code>TASOPT.engine.conductivity_Nafion</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">conductivity_Nafion(T, Œª)</code></pre><p>This function calculates the conductivity of Nafion as a function of water content.</p><details class="admonition is-details" id="Inputs-and-Outputs-51a3fbc78caaa9fd"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-51a3fbc78caaa9fd" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: fuel cell temperature (K)</li><li><code>Œª::Float64</code>: water content; ratio of water molecules to SO3- sites</li></ul><p><strong>Outputs:</strong></p><ul><li><code>œÉ::Float64</code>: conductivity (Ohm m)^-1</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L750-L761">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.Œª_calc"><a class="docstring-binding" href="#TASOPT.engine.Œª_calc"><code>TASOPT.engine.Œª_calc</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">Œª_calc(a)</code></pre><p>This function calculates the water content at the Nafion/electrode interface based on water activity.</p><details class="admonition is-details" id="Inputs-and-Outputs-97fd4f85f499b4f6"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-97fd4f85f499b4f6" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>a::Float64</code>: water activity</li></ul><p><strong>Outputs:</strong></p><ul><li><code>Œª::Float64</code>: water content; ratio of water molecules to SO3- sites</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L799-L809">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.dŒª_dz_membrane"><a class="docstring-binding" href="#TASOPT.engine.dŒª_dz_membrane"><code>TASOPT.engine.dŒª_dz_membrane</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">dŒª_dz_membrane(Œª, u, p)</code></pre><p>This function evaluates the derivative in space of the water content in the membrane.</p><details class="admonition is-details" id="Inputs-and-Outputs-994814cafe1a1bb2"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-994814cafe1a1bb2" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>Œª::Float64</code>: water content; ratio of water molecules to SO3- sites</li><li><code>u::Struct</code>: structure of type PEMFC_inputs with inputs </li><li><code>p::Struct</code>: structure of type PEMFC_params with parameters </li></ul><p><strong>Outputs:</strong></p><ul><li><code>dŒª_dz::Float64</code>: derivative of Œª in space</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L821-L833">source</a></section></details></article><h3 id="High-temperature-PEM-model"><a class="docs-heading-anchor" href="#High-temperature-PEM-model">High-temperature PEM model</a><a id="High-temperature-PEM-model-1"></a><a class="docs-heading-anchor-permalink" href="#High-temperature-PEM-model" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="TASOPT.engine.HT_PEMFC_voltage"><a class="docstring-binding" href="#TASOPT.engine.HT_PEMFC_voltage"><code>TASOPT.engine.HT_PEMFC_voltage</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">HT_PEMFC_voltage(u)</code></pre><p>A 1-D model of the voltage across a high-temperature PEM fuel cell with a PBI membrane. The code is based on the LT-PEMFC model by Springer et al. (1991), modified to eliminate water transport across the membrane and with conductivity values for PBI.</p><details class="admonition is-details" id="Inputs-and-Outputs-72f6e6ea6e17f08b"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-72f6e6ea6e17f08b" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs</li></ul><p><strong>Outputs:</strong></p><ul><li><code>V::Float64</code>: voltage across cell (V)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L449-L462">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.conductivity_PBI"><a class="docstring-binding" href="#TASOPT.engine.conductivity_PBI"><code>TASOPT.engine.conductivity_PBI</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">conductivity_PBI(T, DL, RH)</code></pre><p>This function calculates the conductivity of a PBI membrane as a function of temperature, doping level and humidity. Model from K. Jiao and X. Li (2009). A Three-Dimensional Non-isothermal Model of High Temperature Proton Exchange  Membrane Fuel Cells with Phosphoric Acid Doped Polybenzimidazole Membranes.</p><details class="admonition is-details" id="Inputs-and-Outputs-a90a2a544f960ec0"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-a90a2a544f960ec0" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: fuel cell temperature (K)</li><li><code>DL::Float64</code>: phosphoric acid doping level</li><li><code>RH::Float64</code>: average relative humidity across membrane</li></ul><p><strong>Outputs:</strong></p><ul><li><code>œÉ::Float64</code>: conductivity (Ohm m)^-1</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L768-L782">source</a></section></details></article><h3 id="Stack-and-design"><a class="docs-heading-anchor" href="#Stack-and-design">Stack and design</a><a id="Stack-and-design-1"></a><a class="docs-heading-anchor-permalink" href="#Stack-and-design" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="TASOPT.engine.PEMsize"><a class="docstring-binding" href="#TASOPT.engine.PEMsize"><code>TASOPT.engine.PEMsize</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">PEMsize(P_des, V_des, u)</code></pre><p>Designs the fuel cell stack for the design point conditions.</p><details class="admonition is-details" id="Inputs-and-Outputs-75a714e4cbc44852"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-75a714e4cbc44852" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>P_des::Float64</code>: design stack output power, ideally maximum power in mission (W)</li><li><code>V_des::Float64</code>: design stack voltage (V)</li><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs </li></ul><p><strong>Outputs:</strong></p><ul><li><code>n_cells::Float64</code>: number of cells in stack</li><li><code>A_cell::Float64</code>: cell surface area (m^2)</li><li><code>Q::Float64</code>: waste power produced by the fuel cell at design point (W)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L987-L1002">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.PEMoper"><a class="docstring-binding" href="#TASOPT.engine.PEMoper"><code>TASOPT.engine.PEMoper</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">PEMoper(P_stack, n_cells, A_cell, u)</code></pre><p>Evaluates fuel cell stack performance in off-design conditions.</p><details class="admonition is-details" id="Inputs-and-Outputs-29e346b4ed6b0ec4"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-29e346b4ed6b0ec4" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>P_stack::Float64</code>: stack output power (W)</li><li><code>n_cells::Float64</code>: number of cells in stack</li><li><code>A_cell::Float64</code>: cell surface area (m^2)</li><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs </li></ul><p><strong>Outputs:</strong></p><ul><li><code>V_stack::Float64</code>: stack voltage (V)</li><li><code>Q::Float64</code>: waste power produced by the fuel cell (W)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L1029-L1044">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.PEMstackweight"><a class="docstring-binding" href="#TASOPT.engine.PEMstackweight"><code>TASOPT.engine.PEMstackweight</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">PEMstackweight(gee, u, A, n_cells, fouter)</code></pre><p>Calculates the weight of a stack of PEM fuel cells.</p><details class="admonition is-details" id="Inputs-and-Outputs-9870b42be7da4649"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-9870b42be7da4649" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>gee::Float64</code>: gravitational acceleration (m/s^2)</li><li><code>u::Struct</code>: structure of type <code>PEMFC_inputs</code> with inputs </li><li><code>n_cells::Float64</code>: number of cells in stack</li><li><code>A_cell::Float64</code>: cell surface area (m^2)</li><li><code>fouter::Float64</code>: ratio of stack structural mass (inc. bipolar plates) to membrane and electrode mass</li></ul><p><strong>Outputs:</strong></p><ul><li><code>W_stack::Float64</code>: weight of FC stack (N)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L1100-L1115">source</a></section></details></article><h3 id="Physics-and-mathematics"><a class="docs-heading-anchor" href="#Physics-and-mathematics">Physics and mathematics</a><a id="Physics-and-mathematics-1"></a><a class="docs-heading-anchor-permalink" href="#Physics-and-mathematics" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="TASOPT.engine.water_sat_pressure"><a class="docstring-binding" href="#TASOPT.engine.water_sat_pressure"><code>TASOPT.engine.water_sat_pressure</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">water_sat_pressure(T)</code></pre><p>Function to calculate the saturation partial pressure of water. It uses different models for temperatures above or below 100 degrees Celsius. </p><details class="admonition is-details" id="Inputs-and-Outputs-ac13389511482918"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-ac13389511482918" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: gas temperature (K)</li></ul><p><strong>Outputs:</strong></p><ul><li><code>p_SAT::Float64</code>: saturation pressure (Pa)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L585-L597">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.binary_diffusion"><a class="docstring-binding" href="#TASOPT.engine.binary_diffusion"><code>TASOPT.engine.binary_diffusion</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">binary_diffusion(T, p, sps)</code></pre><p>This model estimates the binary diffusion coefficient of a gas species in a water vapor, to be used inside the electrodes. It uses the method of Slattery and Bird (1958) for low pressures.</p><details class="admonition is-details" id="Inputs-and-Outputs-3559f448f78f208d"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-3559f448f78f208d" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: gas temperature (K)</li><li><code>p::Float64</code>: gas pressure (Pa)</li><li><code>sps::Vec{String}</code>: gas species vector (&quot;H2&quot;, &quot;H2&quot;, &quot;N2&quot; or &quot;O2&quot;)</li></ul><p><strong>Outputs:</strong></p><ul><li><code>D::Float64</code>: diffusion coefficient (m^2/s)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L610-L624">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.porous_diffusion"><a class="docstring-binding" href="#TASOPT.engine.porous_diffusion"><code>TASOPT.engine.porous_diffusion</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">porous_diffusion(D, Œµ, œÑ)</code></pre><p>This model estimates the effective diffusion coefficient of a gas in a porous environment, such as a PEM electrode.</p><details class="admonition is-details" id="Inputs-and-Outputs-e1e4880911dd030b"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-e1e4880911dd030b" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>D::Float64</code>: diffusion coefficient outside porous material (m^2/s)</li><li><code>Œµ::Float64</code>: porosity of material</li><li><code>œÑ::String</code>: tortuosity of material</li></ul><p><strong>Outputs:</strong></p><ul><li><code>Deff::Float64</code>: effective diffusion coefficient (m^2/s)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L678-L691">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.cathode_j0"><a class="docstring-binding" href="#TASOPT.engine.cathode_j0"><code>TASOPT.engine.cathode_j0</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">cathode_j0(T, p, Aeff_ratio)</code></pre><p>This function calculates the exchange current density of a PEM with a platinum catalyst. </p><details class="admonition is-details" id="Inputs-and-Outputs-39bc9b3c8882140b"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-39bc9b3c8882140b" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>T::Float64</code>: fuel cell temperature (K)</li><li><code>p::Float64</code>: reactant partial pressure (Pa)</li><li><code>Aeff_ratio::Float64</code>: ratio of catalyst surface area to geometric cross-sectional area</li></ul><p><strong>Outputs:</strong></p><ul><li><code>j0::Float64</code>: exchange current density (A/m^2)</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L723-L735">source</a></section></details></article><article><details class="docstring" open="true"><summary id="OrdinaryDiffEqLowOrderRK.RK4"><a class="docstring-binding" href="#OrdinaryDiffEqLowOrderRK.RK4"><code>OrdinaryDiffEqLowOrderRK.RK4</code></a> ‚Äî <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RK4(; stage_limiter! = OrdinaryDiffEq.trivial_limiter!,
      step_limiter! = OrdinaryDiffEq.trivial_limiter!,
      thread = OrdinaryDiffEq.False())</code></pre><p>Explicit Runge-Kutta Method.  The canonical Runge-Kutta Order 4 method. Uses a defect control for adaptive stepping using maximum error over the whole interval. Classic fourth-order method. Good for medium accuracy calculations.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>stage_limiter!</code>: function of the form <code>limiter!(u, integrator, p, t)</code></li><li><code>step_limiter!</code>: function of the form <code>limiter!(u, integrator, p, t)</code></li><li><code>thread</code>: determines whether internal broadcasting on appropriate CPU arrays should be serial (<code>thread = OrdinaryDiffEq.False()</code>) or use multiple threads (<code>thread = OrdinaryDiffEq.True()</code>) when Julia is started with multiple threads.</li></ul><p><strong>References</strong></p><p>@article{shampine2005solving,       title={Solving ODEs and DDEs with residual control},       author={Shampine, LF},       journal={Applied Numerical Mathematics},       volume={52},       number={1},       pages={113‚Äì127},       year={2005},       publisher={Elsevier}       }</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/OrdinaryDiffEq.jl/blob/v1.9.0/src/algorithms.jl#L69-L94">source</a></section></details></article><article><details class="docstring" open="true"><summary id="TASOPT.engine.solve_diffusion_ODE"><a class="docstring-binding" href="#TASOPT.engine.solve_diffusion_ODE"><code>TASOPT.engine.solve_diffusion_ODE</code></a> ‚Äî <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">solve_diffusion_ODE(M, B, x0, d)</code></pre><p>This function uses eigendecomposition to solve a problem of the form dx/dz = M * x + B</p><details class="admonition is-details" id="Inputs-and-Outputs-7e6e75dc6dd4f81a"><summary class="admonition-header">üîÉ Inputs and Outputs<a class="admonition-anchor" href="#Inputs-and-Outputs-7e6e75dc6dd4f81a" title="Permalink"></a></summary><div class="admonition-body"><p><strong>Inputs:</strong></p><ul><li><code>M::Matrix{Float64}</code>: matrix with coefficients</li><li><code>B::Vector{Float64}</code>: vector with right-hand parameters</li><li><code>x0::Vector{Float64}</code>: vector with the boundary conditions</li><li><code>d::Float64</code>: distance at which to evaluate x, z = d</li></ul><p><strong>Outputs:</strong></p><ul><li><code>x_end::Vector{Float64}</code>: vector with values of x at z = d</li></ul></div></details></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MIT-LAE/TASOPT.jl/blob/4c77af0f25938bf38909308cbf6cdad94e17e78a/src/engine/PEMfuelcell.jl#L856-L869">source</a></section></details></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>O&#39;Hayre, Ryan, et al. Fuel cell fundamentals. John Wiley &amp; Sons, 2016.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Springer, Thomas E., T. A. Zawodzinski, and Shimshon Gottesfeld. &quot;Polymer electrolyte fuel cell model.&quot; Journal of the electrochemical society 138.8 (1991): 2334.</li><li class="footnote" id="footnote-3"><a class="tag is-link" href="#citeref-3">3</a>Jiao, K., and X. Li. &quot;A Three‚ÄêDimensional Non‚Äêisothermal Model of High Temperature Proton Exchange Membrane Fuel Cells with Phosphoric Acid Doped Polybenzimidazole Membranes.&quot; Fuel Cells 10.3 (2010): 351-362.</li><li class="footnote" id="footnote-4"><a class="tag is-link" href="#citeref-4">4</a>Huang, Jianhua. &quot;A simple accurate formula for calculating saturation vapor pressure of water and ice.&quot; Journal of Applied Meteorology and Climatology 57.6 (2018): 1265-1272.</li><li class="footnote" id="footnote-5"><a class="tag is-link" href="#citeref-5">5</a>Barbir, Frano. PEM fuel cells: theory and practice. Academic press, 2012.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../hxfun/">¬´ Heat exchangers</a><a class="docs-footer-nextpage" href="../ElectricMachines/">Electric Machines ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 30 January 2026 16:23">Friday 30 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
